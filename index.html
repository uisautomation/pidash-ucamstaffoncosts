

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>University of Cambridge Staff On-costs Calculator &mdash; University of Cambridge Staff On-costs  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> University of Cambridge Staff On-costs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">University of Cambridge Staff On-costs Calculator</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
<li><a class="reference internal" href="#module-ucamstaffoncosts">Reference</a><ul>
<li><a class="reference internal" href="#costs-calculation">Costs calculation</a></li>
<li><a class="reference internal" href="#modelling-salary-progression">Modelling salary progression</a></li>
<li><a class="reference internal" href="#salary-scales">Salary scales</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">University of Cambridge Staff On-costs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>University of Cambridge Staff On-costs Calculator</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="university-of-cambridge-staff-on-costs-calculator">
<h1>University of Cambridge Staff On-costs Calculator<a class="headerlink" href="#university-of-cambridge-staff-on-costs-calculator" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ucamstaffoncosts</span></code> module calculates total on-costs associated with
employing staff members in the University of Cambridge. The total on-costs value
calculated by this module reflects the expenditure which will result from
employing a staff member on a grant.</p>
<p>The aim is to replicate the <a class="reference external" href="https://www.hr.admin.cam.ac.uk/Salaries/242">information</a> available on the University HR’s
website using only the publicly available rates.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Installation is best done via pip:</p>
<div class="code console highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install git+https://github.com/uisautomation/pidash-ucamstaffoncosts
</pre></div>
</div>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>Our example employee will have the following attributes:</p>
<ul>
<li><p class="first">They are currently at the bottom of grade 2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts.salary.scales</span> <span class="k">import</span> <span class="n">EXAMPLE_SALARY_SCALES</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">initial_grade</span> <span class="o">=</span> <span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">initial_point</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">starting_point_for_grade</span><span class="p">(</span><span class="n">initial_grade</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Their next employment anniversary is on the 1st June 2016:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">next_anniversary_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">They are on the USS salary exchange pension scheme:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">scheme</span> <span class="o">=</span> <span class="n">Scheme</span><span class="o">.</span><span class="n">USS_EXCHANGE</span>
</pre></div>
</div>
</li>
<li><p class="first">Their contract started on 1st April 2015:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">start_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Their contract ends on 30th September and so they are no-longer employed from
the 1st October:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">until_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">The date from which we want to calculate the commitments is the 1st February
2016:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">from_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>We can use the <a class="reference internal" href="#ucamstaffoncosts.employment_expenditure_and_commitments" title="ucamstaffoncosts.employment_expenditure_and_commitments"><code class="xref py py-func docutils literal notranslate"><span class="pre">employment_expenditure_and_commitments()</span></code></a> function to
calculate the total commitment for employing this staff member as of
<em>from_date</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ucamstaffoncosts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expenditure</span><span class="p">,</span> <span class="n">commitments</span><span class="p">,</span> <span class="n">explanations</span> <span class="o">=</span> <span class="n">ucamstaffoncosts</span><span class="o">.</span><span class="n">employment_expenditure_and_commitments</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">until_date</span><span class="p">,</span> <span class="n">initial_grade</span><span class="p">,</span> <span class="n">initial_point</span><span class="p">,</span> <span class="n">scheme</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="n">start_date</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span> <span class="n">next_anniversary_date</span><span class="o">=</span><span class="n">next_anniversary_date</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">scale_table</span><span class="o">=</span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expenditure</span>
<span class="go">14837</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">commitments</span>
<span class="go">90245</span>
</pre></div>
</div>
<p>This number seems a little arbitrary so we can use the provided list of
explanations to explain the calculation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts.util</span> <span class="k">import</span> <span class="n">pprinttable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">print_explanations</span><span class="p">(</span><span class="n">explanations</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">running_commitment</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">explanation</span> <span class="ow">in</span> <span class="n">explanations</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;TAX YEAR: </span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">explanation</span><span class="o">.</span><span class="n">tax_year</span><span class="p">,</span> <span class="n">explanation</span><span class="o">.</span><span class="n">tax_year</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Salaries</span><span class="se">\n</span><span class="s1">--------</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">pprinttable</span><span class="p">(</span><span class="n">explanation</span><span class="o">.</span><span class="n">salaries</span><span class="p">)</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Costs</span><span class="se">\n</span><span class="s1">-----&#39;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="n">explanation</span><span class="o">.</span><span class="n">cost</span><span class="o">.</span><span class="n">tax_year</span> <span class="o">!=</span> <span class="n">explanation</span><span class="o">.</span><span class="n">tax_year</span><span class="p">:</span>
<span class="gp">... </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(approximated using tax tables for </span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">explanation</span><span class="o">.</span><span class="n">cost</span><span class="o">.</span><span class="n">tax_year</span><span class="p">))</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">pprinttable</span><span class="p">([</span><span class="n">explanation</span><span class="o">.</span><span class="n">cost</span><span class="p">])</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Salary for year: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">explanation</span><span class="o">.</span><span class="n">salary</span><span class="p">))</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Salary earned after </span><span class="si">{}</span><span class="s1">: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">from_date</span><span class="p">,</span> <span class="n">explanation</span><span class="o">.</span><span class="n">salary_to_come</span><span class="p">))</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Expenditure until </span><span class="si">{}</span><span class="s1">: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">from_date</span><span class="p">,</span> <span class="n">explanation</span><span class="o">.</span><span class="n">expenditure</span><span class="p">))</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Commitment from </span><span class="si">{}</span><span class="s1">: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">from_date</span><span class="p">,</span> <span class="n">explanation</span><span class="o">.</span><span class="n">commitment</span><span class="p">))</span>
<span class="gp">... </span>        <span class="n">running_commitment</span> <span class="o">+=</span> <span class="n">explanation</span><span class="o">.</span><span class="n">commitment</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Running total commitment: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">running_commitment</span><span class="p">))</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_explanations</span><span class="p">(</span><span class="n">explanations</span><span class="p">)</span> <span class="c1"># doctest: +NORMALIZE_WHITESPACE</span>
<span class="go">============================================================</span>
<span class="go">TAX YEAR: 2015/2016</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salaries</span>
<span class="go">--------</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">date       | reason          | grade         | point | base_salary | mapping_table_date</span>
<span class="go">-----------+-----------------+---------------+-------+-------------+-------------------</span>
<span class="go">2015-04-01 | employee start  | Grade.GRADE_2 | P3    | 14254       | 2014-08-01</span>
<span class="go">2015-04-06 | end of tax year | Grade.GRADE_2 | P3    | 14254       | 2014-08-01</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Costs</span>
<span class="go">-----</span>
<span class="go">(approximated using tax tables for 2018)</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">salary | exchange | employer_pension | employer_nic | apprenticeship_levy | total | tax_year</span>
<span class="go">-------+----------+------------------+--------------+---------------------+-------+---------</span>
<span class="go">195    | -16      | 51               | 0            | 0                   | 230   | 2018</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salary for year: 195</span>
<span class="go">Salary earned after 2016-02-01: 0</span>
<span class="go">Expenditure until 2016-02-01: 230</span>
<span class="go">Commitment from 2016-02-01: 0</span>
<span class="go">Running total commitment: 0</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">============================================================</span>
<span class="go">TAX YEAR: 2015/2016</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salaries</span>
<span class="go">--------</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">date       | reason                         | grade         | point | base_salary | mapping_table_date</span>
<span class="go">-----------+--------------------------------+---------------+-------+-------------+-------------------</span>
<span class="go">2015-04-06 | start of tax year              | Grade.GRADE_2 | P3    | 14254       | 2014-08-01</span>
<span class="go">2015-08-01 | new salary table (approximate) | Grade.GRADE_2 | P3    | 14539       | 2015-08-01</span>
<span class="go">2016-04-06 | end of tax year                | Grade.GRADE_2 | P3    | 14539       | 2015-08-01</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Costs</span>
<span class="go">-----</span>
<span class="go">(approximated using tax tables for 2018)</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">salary | exchange | employer_pension | employer_nic | apprenticeship_levy | total | tax_year</span>
<span class="go">-------+----------+------------------+--------------+---------------------+-------+---------</span>
<span class="go">14448  | -1156    | 3756             | 672          | 66                  | 17786 | 2018</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salary for year: 14448</span>
<span class="go">Salary earned after 2016-02-01: 2582</span>
<span class="go">Expenditure until 2016-02-01: 14607</span>
<span class="go">Commitment from 2016-02-01: 3179</span>
<span class="go">Running total commitment: 3179</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">============================================================</span>
<span class="go">TAX YEAR: 2016/2017</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salaries</span>
<span class="go">--------</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">date       | reason                      | grade         | point | base_salary | mapping_table_date</span>
<span class="go">-----------+-----------------------------+---------------+-------+-------------+-------------------</span>
<span class="go">2016-04-06 | start of tax year           | Grade.GRADE_2 | P3    | 14539       | 2015-08-01</span>
<span class="go">2016-06-01 | anniversary: point P3 to P4 | Grade.GRADE_2 | P4    | 14818       | 2015-08-01</span>
<span class="go">2016-08-01 | new salary table            | Grade.GRADE_2 | P4    | 15052       | 2016-08-01</span>
<span class="go">2017-04-06 | end of tax year             | Grade.GRADE_2 | P4    | 15052       | 2016-08-01</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Costs</span>
<span class="go">-----</span>
<span class="go">(approximated using tax tables for 2018)</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">salary | exchange | employer_pension | employer_nic | apprenticeship_levy | total | tax_year</span>
<span class="go">-------+----------+------------------+--------------+---------------------+-------+---------</span>
<span class="go">14934  | -1195    | 3883             | 733          | 68                  | 18423 | 2018</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salary for year: 14934</span>
<span class="go">Salary earned after 2016-02-01: 14934</span>
<span class="go">Expenditure until 2016-02-01: 0</span>
<span class="go">Commitment from 2016-02-01: 18423</span>
<span class="go">Running total commitment: 21602</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">============================================================</span>
<span class="go">TAX YEAR: 2017/2018</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salaries</span>
<span class="go">--------</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">date       | reason                      | grade         | point | base_salary | mapping_table_date</span>
<span class="go">-----------+-----------------------------+---------------+-------+-------------+-------------------</span>
<span class="go">2017-04-06 | start of tax year           | Grade.GRADE_2 | P4    | 15052       | 2016-08-01</span>
<span class="go">2017-06-01 | anniversary: point P4 to P5 | Grade.GRADE_2 | P5    | 15356       | 2016-08-01</span>
<span class="go">2017-08-01 | new salary table            | Grade.GRADE_2 | P5    | 15721       | 2017-08-01</span>
<span class="go">2018-04-06 | end of tax year             | Grade.GRADE_2 | P5    | 15721       | 2017-08-01</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Costs</span>
<span class="go">-----</span>
<span class="go">(approximated using tax tables for 2018)</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">salary | exchange | employer_pension | employer_nic | apprenticeship_levy | total | tax_year</span>
<span class="go">-------+----------+------------------+--------------+---------------------+-------+---------</span>
<span class="go">15557  | -1245    | 4045             | 813          | 71                  | 19241 | 2018</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salary for year: 15557</span>
<span class="go">Salary earned after 2016-02-01: 15557</span>
<span class="go">Expenditure until 2016-02-01: 0</span>
<span class="go">Commitment from 2016-02-01: 19241</span>
<span class="go">Running total commitment: 40843</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">============================================================</span>
<span class="go">TAX YEAR: 2018/2019</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salaries</span>
<span class="go">--------</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">date       | reason                         | grade         | point | base_salary | mapping_table_date</span>
<span class="go">-----------+--------------------------------+---------------+-------+-------------+-------------------</span>
<span class="go">2018-04-06 | start of tax year              | Grade.GRADE_2 | P5    | 15721       | 2017-08-01</span>
<span class="go">2018-08-01 | new salary table (approximate) | Grade.GRADE_2 | P5    | 16035       | 2018-08-01</span>
<span class="go">2019-04-06 | end of tax year                | Grade.GRADE_2 | P5    | 16035       | 2018-08-01</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Costs</span>
<span class="go">-----</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">salary | exchange | employer_pension | employer_nic | apprenticeship_levy | total | tax_year</span>
<span class="go">-------+----------+------------------+--------------+---------------------+-------+---------</span>
<span class="go">15934  | -1275    | 4143             | 860          | 73                  | 19735 | 2018</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salary for year: 15934</span>
<span class="go">Salary earned after 2016-02-01: 15934</span>
<span class="go">Expenditure until 2016-02-01: 0</span>
<span class="go">Commitment from 2016-02-01: 19735</span>
<span class="go">Running total commitment: 60578</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">============================================================</span>
<span class="go">TAX YEAR: 2019/2020</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salaries</span>
<span class="go">--------</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">date       | reason                         | grade         | point | base_salary | mapping_table_date</span>
<span class="go">-----------+--------------------------------+---------------+-------+-------------+-------------------</span>
<span class="go">2019-04-06 | start of tax year              | Grade.GRADE_2 | P5    | 16035       | 2018-08-01</span>
<span class="go">2019-08-01 | new salary table (approximate) | Grade.GRADE_2 | P5    | 16356       | 2019-08-01</span>
<span class="go">2020-04-06 | end of tax year                | Grade.GRADE_2 | P5    | 16356       | 2019-08-01</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Costs</span>
<span class="go">-----</span>
<span class="go">(approximated using tax tables for 2018)</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">salary | exchange | employer_pension | employer_nic | apprenticeship_levy | total | tax_year</span>
<span class="go">-------+----------+------------------+--------------+---------------------+-------+---------</span>
<span class="go">16253  | -1300    | 4226             | 901          | 74                  | 20154 | 2018</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salary for year: 16253</span>
<span class="go">Salary earned after 2016-02-01: 16253</span>
<span class="go">Expenditure until 2016-02-01: 0</span>
<span class="go">Commitment from 2016-02-01: 20154</span>
<span class="go">Running total commitment: 80732</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">============================================================</span>
<span class="go">TAX YEAR: 2020/2021</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salaries</span>
<span class="go">--------</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">date       | reason                         | grade         | point | base_salary | mapping_table_date</span>
<span class="go">-----------+--------------------------------+---------------+-------+-------------+-------------------</span>
<span class="go">2020-04-06 | start of tax year              | Grade.GRADE_2 | P5    | 16356       | 2019-08-01</span>
<span class="go">2020-08-01 | new salary table (approximate) | Grade.GRADE_2 | P5    | 16683       | 2020-08-01</span>
<span class="go">2020-10-01 | end of employment              | Grade.GRADE_2 | P5    | 16683       | 2020-08-01</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Costs</span>
<span class="go">-----</span>
<span class="go">(approximated using tax tables for 2018)</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">salary | exchange | employer_pension | employer_nic | apprenticeship_levy | total | tax_year</span>
<span class="go">-------+----------+------------------+--------------+---------------------+-------+---------</span>
<span class="go">8031   | -642     | 2088             | 0            | 36                  | 9513  | 2018</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salary for year: 8031</span>
<span class="go">Salary earned after 2016-02-01: 8031</span>
<span class="go">Expenditure until 2016-02-01: 0</span>
<span class="go">Commitment from 2016-02-01: 9513</span>
<span class="go">Running total commitment: 90245</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
</pre></div>
</div>
<p>If <em>initial_grade</em> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, the mapping table will still be used but annual
increments will not be processed which means that the total expenditure and
commitments will be lower:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expenditure</span><span class="p">,</span> <span class="n">commitments</span><span class="p">,</span> <span class="n">explanations</span> <span class="o">=</span> <span class="n">ucamstaffoncosts</span><span class="o">.</span><span class="n">employment_expenditure_and_commitments</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">until_date</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">initial_point</span><span class="p">,</span> <span class="n">scheme</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="n">start_date</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span> <span class="n">next_anniversary_date</span><span class="o">=</span><span class="n">next_anniversary_date</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">scale_table</span><span class="o">=</span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expenditure</span>
<span class="go">14837</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">commitments</span>
<span class="go">87258</span>
</pre></div>
</div>
</div>
<div class="section" id="module-ucamstaffoncosts">
<span id="reference"></span><h2>Reference<a class="headerlink" href="#module-ucamstaffoncosts" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ucamstaffoncosts.employment_expenditure_and_commitments">
<code class="descclassname">ucamstaffoncosts.</code><code class="descname">employment_expenditure_and_commitments</code><span class="sig-paren">(</span><em>until_date</em>, <em>initial_grade</em>, <em>initial_point</em>, <em>scheme</em>, <em>start_date=None</em>, <em>from_date=None</em>, <em>occupancy=1</em>, <em>tax_year_start_month=4</em>, <em>tax_year_start_day=6</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts.html#employment_expenditure_and_commitments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.employment_expenditure_and_commitments" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the existing expenditure and remaining commitments for an employee’s contract.
Returns a pair giving the total commitment and a list of <a class="reference internal" href="#ucamstaffoncosts.CommitmentExplanation" title="ucamstaffoncosts.CommitmentExplanation"><code class="xref py py-class docutils literal notranslate"><span class="pre">CommitmentExplanation</span></code></a>
tuples explaining the calculation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>from_date</strong> – date at which to differentiate between expenditure and commitments. If
<code class="docutils literal notranslate"><span class="pre">None</span></code>, today’s date is used.</li>
<li><strong>start_date</strong> – date at which employee started. Results will be returned from this date. If
<code class="docutils literal notranslate"><span class="pre">None</span></code>, the “from date” is used.</li>
<li><strong>occupancy</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numbers.Rational</span></code>) – proportion of full-time this employee works</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Remaining keyword arguments are passed to <code class="xref py py-func docutils literal notranslate"><span class="pre">costs_by_tax_year()</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts</span> <span class="k">import</span> <span class="n">Grade</span><span class="p">,</span> <span class="n">Scheme</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts.salary.scales</span> <span class="k">import</span> <span class="n">EXAMPLE_SALARY_SCALES</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">initial_grade</span> <span class="o">=</span> <span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">initial_point</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">starting_point_for_grade</span><span class="p">(</span><span class="n">initial_grade</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scheme</span> <span class="o">=</span> <span class="n">Scheme</span><span class="o">.</span><span class="n">USS_EXCHANGE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">next_anniversary_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">from_date</span> <span class="o">=</span> <span class="n">next_anniversary_date</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">until_date</span> <span class="o">=</span> <span class="n">from_date</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expenditure</span><span class="p">,</span> <span class="n">commitments</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">employment_expenditure_and_commitments</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">until_date</span><span class="p">,</span> <span class="n">initial_grade</span><span class="p">,</span> <span class="n">initial_point</span><span class="p">,</span> <span class="n">scheme</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span> <span class="n">next_anniversary_date</span><span class="o">=</span><span class="n">next_anniversary_date</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">scale_table</span><span class="o">=</span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expenditure</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">commitments</span>
<span class="go">50146</span>
</pre></div>
</div>
<p>The <em>occupancy</em> parameter allows one to specify what proportion of full time this person works:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">fractions</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="p">,</span> <span class="n">half_time_commitments</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">employment_expenditure_and_commitments</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">until_date</span><span class="p">,</span> <span class="n">initial_grade</span><span class="p">,</span> <span class="n">initial_point</span><span class="p">,</span> <span class="n">scheme</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">occupancy</span><span class="o">=</span><span class="n">fractions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span> <span class="n">next_anniversary_date</span><span class="o">=</span><span class="n">next_anniversary_date</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">scale_table</span><span class="o">=</span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">half_time_commitments</span>
<span class="go">24221</span>
</pre></div>
</div>
<p>Notice that this value is not half of the full-time commitments since employer costs do not
scale linearly!</p>
<p>The first tax year returned will contain the <em>from_date</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">from_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">explanations</span> <span class="o">=</span> <span class="n">employment_expenditure_and_commitments</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">until_date</span><span class="p">,</span> <span class="n">initial_grade</span><span class="p">,</span> <span class="n">initial_point</span><span class="p">,</span> <span class="n">scheme</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span> <span class="n">next_anniversary_date</span><span class="o">=</span><span class="n">next_anniversary_date</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">scale_table</span><span class="o">=</span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">explanations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tax_year</span>
<span class="go">2016</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="ucamstaffoncosts.CommitmentExplanation">
<em class="property">class </em><code class="descclassname">ucamstaffoncosts.</code><code class="descname">CommitmentExplanation</code><a class="reference internal" href="_modules/ucamstaffoncosts.html#CommitmentExplanation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.CommitmentExplanation" title="Permalink to this definition">¶</a></dt>
<dd><p>An explanation of the commitment calculation for a given tax year.</p>
<dl class="attribute">
<dt id="ucamstaffoncosts.CommitmentExplanation.tax_year">
<code class="descname">tax_year</code><a class="headerlink" href="#ucamstaffoncosts.CommitmentExplanation.tax_year" title="Permalink to this definition">¶</a></dt>
<dd><p>Integer giving the calendar year when the tax year started</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.CommitmentExplanation.salary">
<code class="descname">salary</code><a class="headerlink" href="#ucamstaffoncosts.CommitmentExplanation.salary" title="Permalink to this definition">¶</a></dt>
<dd><p>Total base salary for the tax year</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.CommitmentExplanation.salary_to_come">
<code class="descname">salary_to_come</code><a class="headerlink" href="#ucamstaffoncosts.CommitmentExplanation.salary_to_come" title="Permalink to this definition">¶</a></dt>
<dd><p>Salary which is yet to come. I.e. the salary which has not yet been earned as of the “from”
date.</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.CommitmentExplanation.expenditure">
<code class="descname">expenditure</code><a class="headerlink" href="#ucamstaffoncosts.CommitmentExplanation.expenditure" title="Permalink to this definition">¶</a></dt>
<dd><p>The expenditure for this tax year. I.e. the amount of total cost of employment which has
already been spent.</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.CommitmentExplanation.commitment">
<code class="descname">commitment</code><a class="headerlink" href="#ucamstaffoncosts.CommitmentExplanation.commitment" title="Permalink to this definition">¶</a></dt>
<dd><p>The commitment for this tax year. This is the total cost of employment minus the
expenditure.</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.CommitmentExplanation.salaries">
<code class="descname">salaries</code><a class="headerlink" href="#ucamstaffoncosts.CommitmentExplanation.salaries" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of <a class="reference internal" href="#ucamstaffoncosts.SalaryRecord" title="ucamstaffoncosts.SalaryRecord"><code class="xref py py-class docutils literal notranslate"><span class="pre">SalaryRecord</span></code></a> tuples which
explain why the employee’s salary is what it is during the tax year.</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.CommitmentExplanation.cost">
<code class="descname">cost</code><a class="headerlink" href="#ucamstaffoncosts.CommitmentExplanation.cost" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#ucamstaffoncosts.Cost" title="ucamstaffoncosts.Cost"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cost</span></code></a> tuple explaining the total cost of employment for the tax year.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ucamstaffoncosts.Scheme">
<em class="property">class </em><code class="descclassname">ucamstaffoncosts.</code><code class="descname">Scheme</code><a class="reference internal" href="_modules/ucamstaffoncosts/costs.html#Scheme"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.Scheme" title="Permalink to this definition">¶</a></dt>
<dd><p>Possible pension schemes an employee can be a member of.</p>
<dl class="attribute">
<dt id="ucamstaffoncosts.Scheme.NONE">
<code class="descname">NONE</code><em class="property"> = 1</em><a class="headerlink" href="#ucamstaffoncosts.Scheme.NONE" title="Permalink to this definition">¶</a></dt>
<dd><p>No pension scheme.</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Scheme.CPS_HYBRID">
<code class="descname">CPS_HYBRID</code><em class="property"> = 2</em><a class="headerlink" href="#ucamstaffoncosts.Scheme.CPS_HYBRID" title="Permalink to this definition">¶</a></dt>
<dd><p>CPS hybrid</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Scheme.CPS_HYBRID_EXCHANGE">
<code class="descname">CPS_HYBRID_EXCHANGE</code><em class="property"> = 3</em><a class="headerlink" href="#ucamstaffoncosts.Scheme.CPS_HYBRID_EXCHANGE" title="Permalink to this definition">¶</a></dt>
<dd><p>CPS hybrid with salary exchange</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Scheme.USS">
<code class="descname">USS</code><em class="property"> = 4</em><a class="headerlink" href="#ucamstaffoncosts.Scheme.USS" title="Permalink to this definition">¶</a></dt>
<dd><p>USS</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Scheme.USS_EXCHANGE">
<code class="descname">USS_EXCHANGE</code><em class="property"> = 5</em><a class="headerlink" href="#ucamstaffoncosts.Scheme.USS_EXCHANGE" title="Permalink to this definition">¶</a></dt>
<dd><p>USS with salary exchange</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Scheme.NHS">
<code class="descname">NHS</code><em class="property"> = 6</em><a class="headerlink" href="#ucamstaffoncosts.Scheme.NHS" title="Permalink to this definition">¶</a></dt>
<dd><p>NHS</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Scheme.MRC">
<code class="descname">MRC</code><em class="property"> = 7</em><a class="headerlink" href="#ucamstaffoncosts.Scheme.MRC" title="Permalink to this definition">¶</a></dt>
<dd><p>MRC</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Scheme.CPS_PRE_2013">
<code class="descname">CPS_PRE_2013</code><em class="property"> = 8</em><a class="headerlink" href="#ucamstaffoncosts.Scheme.CPS_PRE_2013" title="Permalink to this definition">¶</a></dt>
<dd><p>CPS pre-2013</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Scheme.CPS_PRE_2013_EXCHANGE">
<code class="descname">CPS_PRE_2013_EXCHANGE</code><em class="property"> = 9</em><a class="headerlink" href="#ucamstaffoncosts.Scheme.CPS_PRE_2013_EXCHANGE" title="Permalink to this definition">¶</a></dt>
<dd><p>CPS pre-2013 with salary exchange</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ucamstaffoncosts.Grade">
<em class="property">class </em><code class="descclassname">ucamstaffoncosts.</code><code class="descname">Grade</code><a class="reference internal" href="_modules/ucamstaffoncosts/salary/scales.html#Grade"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.Grade" title="Permalink to this definition">¶</a></dt>
<dd><p>Possible grades an employee can be employed at.</p>
<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.T_GRADE">
<code class="descname">T_GRADE</code><em class="property"> = 1</em><a class="headerlink" href="#ucamstaffoncosts.Grade.T_GRADE" title="Permalink to this definition">¶</a></dt>
<dd><p>“T” grade</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.GRADE_1">
<code class="descname">GRADE_1</code><em class="property"> = 2</em><a class="headerlink" href="#ucamstaffoncosts.Grade.GRADE_1" title="Permalink to this definition">¶</a></dt>
<dd><p>Grade 1</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.GRADE_2">
<code class="descname">GRADE_2</code><em class="property"> = 3</em><a class="headerlink" href="#ucamstaffoncosts.Grade.GRADE_2" title="Permalink to this definition">¶</a></dt>
<dd><p>Grade 2</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.GRADE_3">
<code class="descname">GRADE_3</code><em class="property"> = 4</em><a class="headerlink" href="#ucamstaffoncosts.Grade.GRADE_3" title="Permalink to this definition">¶</a></dt>
<dd><p>Grade 3</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.GRADE_4">
<code class="descname">GRADE_4</code><em class="property"> = 5</em><a class="headerlink" href="#ucamstaffoncosts.Grade.GRADE_4" title="Permalink to this definition">¶</a></dt>
<dd><p>Grade 4</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.GRADE_5">
<code class="descname">GRADE_5</code><em class="property"> = 6</em><a class="headerlink" href="#ucamstaffoncosts.Grade.GRADE_5" title="Permalink to this definition">¶</a></dt>
<dd><p>Grade 5</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.GRADE_6">
<code class="descname">GRADE_6</code><em class="property"> = 7</em><a class="headerlink" href="#ucamstaffoncosts.Grade.GRADE_6" title="Permalink to this definition">¶</a></dt>
<dd><p>Grade 6</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.GRADE_7">
<code class="descname">GRADE_7</code><em class="property"> = 8</em><a class="headerlink" href="#ucamstaffoncosts.Grade.GRADE_7" title="Permalink to this definition">¶</a></dt>
<dd><p>Grade 7</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.GRADE_8">
<code class="descname">GRADE_8</code><em class="property"> = 9</em><a class="headerlink" href="#ucamstaffoncosts.Grade.GRADE_8" title="Permalink to this definition">¶</a></dt>
<dd><p>Grade 8</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.GRADE_9">
<code class="descname">GRADE_9</code><em class="property"> = 10</em><a class="headerlink" href="#ucamstaffoncosts.Grade.GRADE_9" title="Permalink to this definition">¶</a></dt>
<dd><p>Grade 9</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.GRADE_10">
<code class="descname">GRADE_10</code><em class="property"> = 11</em><a class="headerlink" href="#ucamstaffoncosts.Grade.GRADE_10" title="Permalink to this definition">¶</a></dt>
<dd><p>Grade 10</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.GRADE_11">
<code class="descname">GRADE_11</code><em class="property"> = 12</em><a class="headerlink" href="#ucamstaffoncosts.Grade.GRADE_11" title="Permalink to this definition">¶</a></dt>
<dd><p>Grade 11</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.GRADE_12_BAND_1">
<code class="descname">GRADE_12_BAND_1</code><em class="property"> = 13</em><a class="headerlink" href="#ucamstaffoncosts.Grade.GRADE_12_BAND_1" title="Permalink to this definition">¶</a></dt>
<dd><p>Grade 12 band 1</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.GRADE_12_BAND_2">
<code class="descname">GRADE_12_BAND_2</code><em class="property"> = 14</em><a class="headerlink" href="#ucamstaffoncosts.Grade.GRADE_12_BAND_2" title="Permalink to this definition">¶</a></dt>
<dd><p>Grade 12 band 2</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.GRADE_12_BAND_3">
<code class="descname">GRADE_12_BAND_3</code><em class="property"> = 15</em><a class="headerlink" href="#ucamstaffoncosts.Grade.GRADE_12_BAND_3" title="Permalink to this definition">¶</a></dt>
<dd><p>Grade 12 band 3</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.GRADE_12_BAND_4">
<code class="descname">GRADE_12_BAND_4</code><em class="property"> = 16</em><a class="headerlink" href="#ucamstaffoncosts.Grade.GRADE_12_BAND_4" title="Permalink to this definition">¶</a></dt>
<dd><p>Grade 12 band 4</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.CLINICAL_NODAL">
<code class="descname">CLINICAL_NODAL</code><em class="property"> = 17</em><a class="headerlink" href="#ucamstaffoncosts.Grade.CLINICAL_NODAL" title="Permalink to this definition">¶</a></dt>
<dd><p>Clinical nodal points</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.CLINICAL_CONSULTANT">
<code class="descname">CLINICAL_CONSULTANT</code><em class="property"> = 18</em><a class="headerlink" href="#ucamstaffoncosts.Grade.CLINICAL_CONSULTANT" title="Permalink to this definition">¶</a></dt>
<dd><p>Clinical consultant</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Grade.CLINICAL_RA_AND_LECTURER">
<code class="descname">CLINICAL_RA_AND_LECTURER</code><em class="property"> = 19</em><a class="headerlink" href="#ucamstaffoncosts.Grade.CLINICAL_RA_AND_LECTURER" title="Permalink to this definition">¶</a></dt>
<dd><p>Clinical research associate or lecturer</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ucamstaffoncosts.Cost">
<em class="property">class </em><code class="descclassname">ucamstaffoncosts.</code><code class="descname">Cost</code><a class="reference internal" href="_modules/ucamstaffoncosts/costs.html#Cost"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.Cost" title="Permalink to this definition">¶</a></dt>
<dd><p>An individual on-costs calculation for a base salary.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These values are all rounded to the nearest pound and so total may not be the sum of all
the other fields.</p>
</div>
<dl class="attribute">
<dt id="ucamstaffoncosts.Cost.salary">
<code class="descname">salary</code><a class="headerlink" href="#ucamstaffoncosts.Cost.salary" title="Permalink to this definition">¶</a></dt>
<dd><p>Base salary for the employee.</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Cost.exchange">
<code class="descname">exchange</code><a class="headerlink" href="#ucamstaffoncosts.Cost.exchange" title="Permalink to this definition">¶</a></dt>
<dd><p>Amount of base salary exchanged as part of a salary exchange pension. By convention, this
value is negative if non-zero.</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Cost.employer_pension">
<code class="descname">employer_pension</code><a class="headerlink" href="#ucamstaffoncosts.Cost.employer_pension" title="Permalink to this definition">¶</a></dt>
<dd><p>Employer pension contribution including any salary exchange amount.</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Cost.employer_nic">
<code class="descname">employer_nic</code><a class="headerlink" href="#ucamstaffoncosts.Cost.employer_nic" title="Permalink to this definition">¶</a></dt>
<dd><p>Employer National Insurance contribution</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Cost.apprenticeship_levy">
<code class="descname">apprenticeship_levy</code><a class="headerlink" href="#ucamstaffoncosts.Cost.apprenticeship_levy" title="Permalink to this definition">¶</a></dt>
<dd><p>Share of Apprenticeship Levy from this employee</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Cost.total">
<code class="descname">total</code><a class="headerlink" href="#ucamstaffoncosts.Cost.total" title="Permalink to this definition">¶</a></dt>
<dd><p>Total on-cost of employing this employee. See note above about situations where this value
may not be the sum of the others.</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.Cost.tax_year">
<code class="descname">tax_year</code><a class="headerlink" href="#ucamstaffoncosts.Cost.tax_year" title="Permalink to this definition">¶</a></dt>
<dd><p>Which year’s table was used to calculate these costs.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ucamstaffoncosts.SalaryRecord">
<em class="property">class </em><code class="descclassname">ucamstaffoncosts.</code><code class="descname">SalaryRecord</code><a class="reference internal" href="_modules/ucamstaffoncosts/salary/progression.html#SalaryRecord"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.SalaryRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.namedtuple</span></code> subclass which represents a salary history record.</p>
<dl class="attribute">
<dt id="ucamstaffoncosts.SalaryRecord.date">
<code class="descname">date</code><a class="headerlink" href="#ucamstaffoncosts.SalaryRecord.date" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code> at which this new salary takes effect.</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.SalaryRecord.reason">
<code class="descname">reason</code><a class="headerlink" href="#ucamstaffoncosts.SalaryRecord.reason" title="Permalink to this definition">¶</a></dt>
<dd><p>Human-readable string describing the reason for this change</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.SalaryRecord.grade">
<code class="descname">grade</code><a class="headerlink" href="#ucamstaffoncosts.SalaryRecord.grade" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#ucamstaffoncosts.Grade" title="ucamstaffoncosts.Grade"><code class="xref py py-class docutils literal notranslate"><span class="pre">Grade</span></code></a> representing the initial grade of the employee</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.SalaryRecord.point">
<code class="descname">point</code><a class="headerlink" href="#ucamstaffoncosts.SalaryRecord.point" title="Permalink to this definition">¶</a></dt>
<dd><p>string giving the name of this employee’s spine point</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.SalaryRecord.base_salary">
<code class="descname">base_salary</code><a class="headerlink" href="#ucamstaffoncosts.SalaryRecord.base_salary" title="Permalink to this definition">¶</a></dt>
<dd><p>base salary of the employee in pounds sterling</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.SalaryRecord.mapping_table_date">
<code class="descname">mapping_table_date</code><a class="headerlink" href="#ucamstaffoncosts.SalaryRecord.mapping_table_date" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code> giving the “effective from” date for the grade and point to base
salary mapping table used</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-ucamstaffoncosts.costs"></span><div class="section" id="costs-calculation">
<h3>Costs calculation<a class="headerlink" href="#costs-calculation" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="#module-ucamstaffoncosts.costs" title="ucamstaffoncosts.costs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">costs</span></code></a> module provides support for calculating the total cost to
employ a staff member. The functionality of the module is exposed through a single function,
<code class="xref py py-func docutils literal notranslate"><span class="pre">cost()</span></code>, which takes a tax year, pension scheme and base salary and
returns an <a class="reference internal" href="#ucamstaffoncosts.Cost" title="ucamstaffoncosts.Cost"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cost</span></code></a> object representing the on-costs for that employee:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">calculate_cost</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">base_salary</span><span class="o">=</span><span class="mi">25000</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="n">Scheme</span><span class="o">.</span><span class="n">USS</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2018</span>
<span class="gp">... </span><span class="p">)</span> <span class="c1"># doctest: +NORMALIZE_WHITESPACE, +ELLIPSIS</span>
<span class="go">Cost(salary=25000, exchange=0, employer_pension=4500,</span>
<span class="go">     employer_nic=2287, apprenticeship_levy=125, total=31912, tax_year=...)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#ucamstaffoncosts.Cost.total" title="ucamstaffoncosts.Cost.total"><code class="xref py py-attr docutils literal notranslate"><span class="pre">total</span></code></a> attribute from the return value
can be used to forecast total expenditure for an employee in a given tax year.</p>
<p>If <em>year</em> is omitted, then the latest tax year which has any calculators
implemented is used. This behaviour can also be signalled by using the special
value <code class="xref py py-const docutils literal notranslate"><span class="pre">LATEST</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">latest_cost</span> <span class="o">=</span> <span class="n">calculate_cost</span><span class="p">(</span><span class="n">base_salary</span><span class="o">=</span><span class="mi">25000</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="n">Scheme</span><span class="o">.</span><span class="n">USS</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="n">LATEST</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">latest_cost</span> <span class="o">==</span> <span class="n">calculate_cost</span><span class="p">(</span><span class="n">base_salary</span><span class="o">=</span><span class="mi">25000</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="n">Scheme</span><span class="o">.</span><span class="n">USS</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>We can get a detailed breakdown of costs for each tax year using the <a class="reference internal" href="#ucamstaffoncosts.costs.costs_by_tax_year" title="ucamstaffoncosts.costs.costs_by_tax_year"><code class="xref py py-func docutils literal notranslate"><span class="pre">costs_by_tax_year()</span></code></a>
function. Our example employee will be a grade 2 whose next employment anniversary is on the 1st
June 2016. The employee on on the USS salary exchange pension scheme and has a first date of
non-employment of 1st October 2020:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts</span> <span class="k">import</span> <span class="n">Grade</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts.salary.scales</span> <span class="k">import</span> <span class="n">EXAMPLE_SALARY_SCALES</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">initial_grade</span> <span class="o">=</span> <span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">initial_point</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">starting_point_for_grade</span><span class="p">(</span><span class="n">initial_grade</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">next_anniversary_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scheme</span> <span class="o">=</span> <span class="n">Scheme</span><span class="o">.</span><span class="n">USS_EXCHANGE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">until_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>We can calculate the total cost of employment by passing these values to :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">costs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">costs_by_tax_year</span><span class="p">(</span>
<span class="gp">... </span>    <span class="mi">2016</span><span class="p">,</span> <span class="n">initial_grade</span><span class="p">,</span> <span class="n">initial_point</span><span class="p">,</span> <span class="n">scheme</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">next_anniversary_date</span><span class="o">=</span><span class="n">next_anniversary_date</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">until_date</span><span class="o">=</span><span class="n">until_date</span><span class="p">,</span> <span class="n">scale_table</span><span class="o">=</span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="p">))</span>
</pre></div>
</div>
<p>We can print out details of these costs to fully explain the cost calculation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts.util</span> <span class="k">import</span> <span class="n">pprinttable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">year</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">salaries</span> <span class="ow">in</span> <span class="n">costs</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;TAX YEAR: </span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">year</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Salaries</span><span class="se">\n</span><span class="s1">--------</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">pprinttable</span><span class="p">(</span><span class="n">salaries</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Costs</span><span class="se">\n</span><span class="s1">-----&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">cost</span><span class="o">.</span><span class="n">tax_year</span> <span class="o">!=</span> <span class="n">year</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(approximated using tax tables for </span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cost</span><span class="o">.</span><span class="n">tax_year</span><span class="p">))</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">pprinttable</span><span class="p">([</span><span class="n">cost</span><span class="p">])</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> <span class="c1"># doctest: +NORMALIZE_WHITESPACE</span>
<span class="go">============================================================</span>
<span class="go">TAX YEAR: 2016/2017</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salaries</span>
<span class="go">--------</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">date       | reason                      | grade         | point | base_salary | mapping_table_date</span>
<span class="go">-----------+-----------------------------+---------------+-------+-------------+-------------------</span>
<span class="go">2016-04-06 | start of tax year           | Grade.GRADE_2 | P3    | 14539       | 2015-08-01</span>
<span class="go">2016-06-01 | anniversary: point P3 to P4 | Grade.GRADE_2 | P4    | 14818       | 2015-08-01</span>
<span class="go">2016-08-01 | new salary table            | Grade.GRADE_2 | P4    | 15052       | 2016-08-01</span>
<span class="go">2017-04-06 | end of tax year             | Grade.GRADE_2 | P4    | 15052       | 2016-08-01</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Costs</span>
<span class="go">-----</span>
<span class="go">(approximated using tax tables for 2018)</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">salary | exchange | employer_pension | employer_nic | apprenticeship_levy | total | tax_year</span>
<span class="go">-------+----------+------------------+--------------+---------------------+-------+---------</span>
<span class="go">14934  | -1195    | 3883             | 733          | 68                  | 18423 | 2018</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">============================================================</span>
<span class="go">TAX YEAR: 2017/2018</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salaries</span>
<span class="go">--------</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">date       | reason                      | grade         | point | base_salary | mapping_table_date</span>
<span class="go">-----------+-----------------------------+---------------+-------+-------------+-------------------</span>
<span class="go">2017-04-06 | start of tax year           | Grade.GRADE_2 | P4    | 15052       | 2016-08-01</span>
<span class="go">2017-06-01 | anniversary: point P4 to P5 | Grade.GRADE_2 | P5    | 15356       | 2016-08-01</span>
<span class="go">2017-08-01 | new salary table            | Grade.GRADE_2 | P5    | 15721       | 2017-08-01</span>
<span class="go">2018-04-06 | end of tax year             | Grade.GRADE_2 | P5    | 15721       | 2017-08-01</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Costs</span>
<span class="go">-----</span>
<span class="go">(approximated using tax tables for 2018)</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">salary | exchange | employer_pension | employer_nic | apprenticeship_levy | total | tax_year</span>
<span class="go">-------+----------+------------------+--------------+---------------------+-------+---------</span>
<span class="go">15557  | -1245    | 4045             | 813          | 71                  | 19241 | 2018</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">============================================================</span>
<span class="go">TAX YEAR: 2018/2019</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salaries</span>
<span class="go">--------</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">date       | reason                         | grade         | point | base_salary | mapping_table_date</span>
<span class="go">-----------+--------------------------------+---------------+-------+-------------+-------------------</span>
<span class="go">2018-04-06 | start of tax year              | Grade.GRADE_2 | P5    | 15721       | 2017-08-01</span>
<span class="go">2018-08-01 | new salary table (approximate) | Grade.GRADE_2 | P5    | 16035       | 2018-08-01</span>
<span class="go">2019-04-06 | end of tax year                | Grade.GRADE_2 | P5    | 16035       | 2018-08-01</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Costs</span>
<span class="go">-----</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">salary | exchange | employer_pension | employer_nic | apprenticeship_levy | total | tax_year</span>
<span class="go">-------+----------+------------------+--------------+---------------------+-------+---------</span>
<span class="go">15934  | -1275    | 4143             | 860          | 73                  | 19735 | 2018</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">============================================================</span>
<span class="go">TAX YEAR: 2019/2020</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salaries</span>
<span class="go">--------</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">date       | reason                         | grade         | point | base_salary | mapping_table_date</span>
<span class="go">-----------+--------------------------------+---------------+-------+-------------+-------------------</span>
<span class="go">2019-04-06 | start of tax year              | Grade.GRADE_2 | P5    | 16035       | 2018-08-01</span>
<span class="go">2019-08-01 | new salary table (approximate) | Grade.GRADE_2 | P5    | 16356       | 2019-08-01</span>
<span class="go">2020-04-06 | end of tax year                | Grade.GRADE_2 | P5    | 16356       | 2019-08-01</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Costs</span>
<span class="go">-----</span>
<span class="go">(approximated using tax tables for 2018)</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">salary | exchange | employer_pension | employer_nic | apprenticeship_levy | total | tax_year</span>
<span class="go">-------+----------+------------------+--------------+---------------------+-------+---------</span>
<span class="go">16253  | -1300    | 4226             | 901          | 74                  | 20154 | 2018</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">============================================================</span>
<span class="go">TAX YEAR: 2020/2021</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Salaries</span>
<span class="go">--------</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">date       | reason                         | grade         | point | base_salary | mapping_table_date</span>
<span class="go">-----------+--------------------------------+---------------+-------+-------------+-------------------</span>
<span class="go">2020-04-06 | start of tax year              | Grade.GRADE_2 | P5    | 16356       | 2019-08-01</span>
<span class="go">2020-08-01 | new salary table (approximate) | Grade.GRADE_2 | P5    | 16683       | 2020-08-01</span>
<span class="go">2020-10-01 | end of employment              | Grade.GRADE_2 | P5    | 16683       | 2020-08-01</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">Costs</span>
<span class="go">-----</span>
<span class="go">(approximated using tax tables for 2018)</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">salary | exchange | employer_pension | employer_nic | apprenticeship_levy | total | tax_year</span>
<span class="go">-------+----------+------------------+--------------+---------------------+-------+---------</span>
<span class="go">8031   | -642     | 2088             | 0            | 36                  | 9513  | 2018</span>
<span class="go">&lt;BLANKLINE&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
</pre></div>
</div>
<dl class="data">
<dt id="ucamstaffoncosts.costs.LATEST">
<code class="descclassname">ucamstaffoncosts.costs.</code><code class="descname">LATEST</code><em class="property"> = 'LATEST'</em><a class="headerlink" href="#ucamstaffoncosts.costs.LATEST" title="Permalink to this definition">¶</a></dt>
<dd><p>Special value to pass to <code class="xref py py-func docutils literal notranslate"><span class="pre">cost()</span></code> to represent the latest tax year which has an
implementation.</p>
</dd></dl>

<dl class="function">
<dt id="ucamstaffoncosts.costs.calculate_cost">
<code class="descclassname">ucamstaffoncosts.costs.</code><code class="descname">calculate_cost</code><span class="sig-paren">(</span><em>base_salary</em>, <em>scheme</em>, <em>year='LATEST'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/costs.html#calculate_cost"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.costs.calculate_cost" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <code class="xref py py-class docutils literal notranslate"><span class="pre">Cost</span></code> instance given a tax year, pension scheme and base salary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>year</strong> (<em>int</em>) – tax year</li>
<li><strong>scheme</strong> (<a class="reference internal" href="#ucamstaffoncosts.Scheme" title="ucamstaffoncosts.Scheme"><em>Scheme</em></a>) – pension scheme</li>
<li><strong>base_salary</strong> (<em>int</em>) – base salary of employee</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><strong>NotImplementedError</strong> – if there is not an implementation for the specified tax year and
pension scheme.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ucamstaffoncosts.costs.costs_by_tax_year">
<code class="descclassname">ucamstaffoncosts.costs.</code><code class="descname">costs_by_tax_year</code><span class="sig-paren">(</span><em>from_year</em>, <em>initial_grade</em>, <em>initial_point</em>, <em>scheme</em>, <em>occupancy=1</em>, <em>start_date=None</em>, <em>next_anniversary_date=None</em>, <em>tax_year_start_month=4</em>, <em>tax_year_start_day=6</em>, <em>until_date=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/costs.html#costs_by_tax_year"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.costs.costs_by_tax_year" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate total employment costs for each tax year for an employee who initially is at a
particular grade and point. Keyword parameters are passed to
<a class="reference internal" href="#ucamstaffoncosts.salary.progression.salary_progression" title="ucamstaffoncosts.salary.progression.salary_progression"><code class="xref py py-func docutils literal notranslate"><span class="pre">ucamstaffoncosts.salary.progression.salary_progression()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>from_year</strong> – tax year to start from</li>
<li><strong>initial_grade</strong> – grade of employee at start of tax year</li>
<li><strong>initial_point</strong> – salary spine point of employee at start of tax year</li>
<li><strong>scheme</strong> – pension scheme of employee</li>
<li><strong>start_date</strong> – date of employment start. If None, it is assumed the employee has been
employed since before the start of the tax year</li>
<li><strong>until_date</strong> – if None, employee is no longer employed on and after this date</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts</span> <span class="k">import</span> <span class="n">Grade</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts.salary.scales</span> <span class="k">import</span> <span class="n">EXAMPLE_SALARY_SCALES</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">initial_grade</span> <span class="o">=</span> <span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">initial_point</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">starting_point_for_grade</span><span class="p">(</span><span class="n">initial_grade</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">next_anniversary_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">until_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">costs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">costs_by_tax_year</span><span class="p">(</span>
<span class="gp">... </span>    <span class="mi">2016</span><span class="p">,</span> <span class="n">initial_grade</span><span class="p">,</span> <span class="n">initial_point</span><span class="p">,</span> <span class="n">Scheme</span><span class="o">.</span><span class="n">USS_EXCHANGE</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">next_anniversary_date</span><span class="o">=</span><span class="n">next_anniversary_date</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">until_date</span><span class="o">=</span><span class="n">until_date</span><span class="p">,</span> <span class="n">scale_table</span><span class="o">=</span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="p">))</span>
</pre></div>
</div>
<p>Each row returns the tax year, cost and salary record:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">costs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="go">2016</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">costs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># doctest: +NORMALIZE_WHITESPACE</span>
<span class="go">Cost(salary=14934, exchange=-1195, employer_pension=3883, employer_nic=733,</span>
<span class="go">     apprenticeship_levy=68, total=18423, tax_year=2018)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">costs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">costs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># doctest: +NORMALIZE_WHITESPACE</span>
<span class="go">SalaryRecord(date=datetime.date(2016, 4, 6), reason=&#39;start of tax year&#39;,</span>
<span class="go">             grade=&lt;Grade.GRADE_2: 3&gt;, point=&#39;P3&#39;, base_salary=14539,</span>
<span class="go">             mapping_table_date=datetime.date(2015, 8, 1))</span>
</pre></div>
</div>
<p>If <em>until_date</em> is before the start of <em>from_year</em> tax year, no results are returned
&gt;&gt;&gt; list(costs_by_tax_year(
…     2016, initial_grade, initial_point, Scheme.USS_EXCHANGE,
…     next_anniversary_date=next_anniversary_date,
…     until_date=datetime.date(2016, 3, 1), scale_table=EXAMPLE_SALARY_SCALES))
[]</p>
</dd></dl>

</div>
<span class="target" id="module-ucamstaffoncosts.salary.progression"></span><div class="section" id="modelling-salary-progression">
<h3>Modelling salary progression<a class="headerlink" href="#modelling-salary-progression" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="#module-ucamstaffoncosts.salary.progression" title="ucamstaffoncosts.salary.progression"><code class="xref py py-mod docutils literal notranslate"><span class="pre">progression</span></code></a> module provides tool to model an employee’s salary change over time
given a grade, point and date to start modelling from. (We call this the “from date” in this
documentation.)</p>
<p>In our example, we’ll start modelling an employee’s salary from the 1st January 2016.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">from_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>To illustrate the use of the module, we’ll make use of the example salary scale table from the
<a class="reference internal" href="#module-ucamstaffoncosts.salary.scales" title="ucamstaffoncosts.salary.scales"><code class="xref py py-mod docutils literal notranslate"><span class="pre">scales</span></code></a> module documentation. When we start modelling, the
employee is on the lowest point of grade 2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts</span> <span class="k">import</span> <span class="n">Grade</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts.salary.scales</span> <span class="k">import</span> <span class="n">EXAMPLE_SALARY_SCALES</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">initial_grade</span> <span class="o">=</span> <span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">initial_point</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">starting_point_for_grade</span><span class="p">(</span><span class="n">initial_grade</span><span class="p">)</span>
</pre></div>
</div>
<p>Their next employment anniversary is the 1st June 2016:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">next_anniversary_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>We want to show their salary progression up until the 1st January 2023:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">until_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#ucamstaffoncosts.salary.progression.salary_progression" title="ucamstaffoncosts.salary.progression.salary_progression"><code class="xref py py-func docutils literal notranslate"><span class="pre">salary_progression()</span></code></a> function will return an iterable given these parameters which
will represent the expected salary progression:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">progression</span> <span class="o">=</span> <span class="n">salary_progression</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">from_date</span><span class="p">,</span> <span class="n">initial_grade</span><span class="p">,</span> <span class="n">initial_point</span><span class="p">,</span> <span class="n">next_anniversary_date</span><span class="o">=</span><span class="n">next_anniversary_date</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">until_date</span><span class="o">=</span><span class="n">until_date</span><span class="p">,</span> <span class="n">scale_table</span><span class="o">=</span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="p">)</span>
</pre></div>
</div>
<p>The iterable returned from <a class="reference internal" href="#ucamstaffoncosts.salary.progression.salary_progression" title="ucamstaffoncosts.salary.progression.salary_progression"><code class="xref py py-func docutils literal notranslate"><span class="pre">salary_progression()</span></code></a> yields <code class="xref py py-class docutils literal notranslate"><span class="pre">SalaryRecord</span></code> tuples.
We’ll use a format string to nicely present the progression in a table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fmt_str</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;</span><span class="si">{date!s: &lt;12}</span><span class="s1"> | </span><span class="si">{reason: &lt;35}</span><span class="s1"> | </span><span class="si">{grade!s: &lt;16}</span><span class="s1"> | </span><span class="si">{point!s: &lt;5}</span><span class="s1"> | &#39;</span>
<span class="gp">... </span>           <span class="s1">&#39;</span><span class="si">{base_salary: &gt;8,d}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">progression</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">fmt_str</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">row</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()))</span>
<span class="go">2016-01-01   | set salary                          | Grade.GRADE_2    | P3    |   14,539</span>
<span class="go">2016-06-01   | anniversary: point P3 to P4         | Grade.GRADE_2    | P4    |   14,818</span>
<span class="go">2016-08-01   | new salary table                    | Grade.GRADE_2    | P4    |   15,052</span>
<span class="go">2017-06-01   | anniversary: point P4 to P5         | Grade.GRADE_2    | P5    |   15,356</span>
<span class="go">2017-08-01   | new salary table                    | Grade.GRADE_2    | P5    |   15,721</span>
<span class="go">2018-08-01   | new salary table (approximate)      | Grade.GRADE_2    | P5    |   16,035</span>
<span class="go">2019-08-01   | new salary table (approximate)      | Grade.GRADE_2    | P5    |   16,356</span>
<span class="go">2020-08-01   | new salary table (approximate)      | Grade.GRADE_2    | P5    |   16,683</span>
<span class="go">2021-08-01   | new salary table (approximate)      | Grade.GRADE_2    | P5    |   17,017</span>
<span class="go">2022-08-01   | new salary table (approximate)      | Grade.GRADE_2    | P5    |   17,357</span>
</pre></div>
</div>
<p>The 1st August salary changes are approximated if the mapping table is not known. In this example,
the actual tables for 2016 and 2017 were used but approximations were used for the remaining
tables. Note that once the maximum anniversary increment point has been reached, no new increments
are made on the employment anniversary.</p>
<dl class="function">
<dt id="ucamstaffoncosts.salary.progression.salary_progression">
<code class="descclassname">ucamstaffoncosts.salary.progression.</code><code class="descname">salary_progression</code><span class="sig-paren">(</span><em>from_date</em>, <em>initial_grade</em>, <em>initial_point</em>, <em>initial_reason=None</em>, <em>next_anniversary_date=None</em>, <em>until_date=None</em>, <em>scale_table=&lt;ucamstaffoncosts.salary.scales.SalaryScaleTable object&gt;</em>, <em>approximate_negotiated_annual_change=None</em>, <em>negotiated_annual_change_month=None</em>, <em>negotiated_annual_change_day=None</em>, <em>elide_null_changes=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/salary/progression.html#salary_progression"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.progression.salary_progression" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterable of <code class="xref py py-class docutils literal notranslate"><span class="pre">SalaryRecord</span></code> tuples describing the salary
progression of an employee.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>from_date</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code>) – start returning results from this date</li>
<li><strong>initial_grade</strong> (<a class="reference internal" href="#ucamstaffoncosts.Grade" title="ucamstaffoncosts.Grade"><code class="xref py py-class docutils literal notranslate"><span class="pre">Grade</span></code></a>) – initial grade for employee</li>
<li><strong>initial_point</strong> (<em>str</em>) – initial spine point for employee</li>
<li><strong>initial_reason</strong> – reason passed to <a class="reference internal" href="#ucamstaffoncosts.salary.progression.set_salary" title="ucamstaffoncosts.salary.progression.set_salary"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_salary()</span></code></a></li>
<li><strong>next_anniversary_date</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code>) – next anniversary increment date or <code class="docutils literal notranslate"><span class="pre">None</span></code> if there is none</li>
<li><strong>until_date</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code>) – it not <code class="docutils literal notranslate"><span class="pre">None</span></code>, stop returning results on or after this date</li>
<li><strong>scale_table</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">SalaryScaleTable</span></code>) – salary scale table to use</li>
<li><strong>approximate_negotiated_annual_change</strong> – passed to <a class="reference internal" href="#ucamstaffoncosts.salary.progression.salary_mapping_tables" title="ucamstaffoncosts.salary.progression.salary_mapping_tables"><code class="xref py py-func docutils literal notranslate"><span class="pre">salary_mapping_tables()</span></code></a></li>
<li><strong>negotiated_annual_change_month</strong> – passed to <a class="reference internal" href="#ucamstaffoncosts.salary.progression.salary_mapping_tables" title="ucamstaffoncosts.salary.progression.salary_mapping_tables"><code class="xref py py-func docutils literal notranslate"><span class="pre">salary_mapping_tables()</span></code></a></li>
<li><strong>negotiated_annual_change_day</strong> – passed to <a class="reference internal" href="#ucamstaffoncosts.salary.progression.salary_mapping_tables" title="ucamstaffoncosts.salary.progression.salary_mapping_tables"><code class="xref py py-func docutils literal notranslate"><span class="pre">salary_mapping_tables()</span></code></a></li>
<li><strong>elide_null_changes</strong> – passed to <a class="reference internal" href="#ucamstaffoncosts.salary.progression.fold" title="ucamstaffoncosts.salary.progression.fold"><code class="xref py py-func docutils literal notranslate"><span class="pre">fold()</span></code></a></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="ucamstaffoncosts.salary.progression.Salary">
<em class="property">class </em><code class="descclassname">ucamstaffoncosts.salary.progression.</code><code class="descname">Salary</code><a class="reference internal" href="_modules/ucamstaffoncosts/salary/progression.html#Salary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.progression.Salary" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.namedtuple</span></code> subclass which represents a salary for an employee. The
<a class="reference internal" href="#ucamstaffoncosts.salary.progression.Salary.grade" title="ucamstaffoncosts.salary.progression.Salary.grade"><code class="xref py py-attr docutils literal notranslate"><span class="pre">grade</span></code></a> and <a class="reference internal" href="#ucamstaffoncosts.salary.progression.Salary.point" title="ucamstaffoncosts.salary.progression.Salary.point"><code class="xref py py-attr docutils literal notranslate"><span class="pre">point</span></code></a> attributes must be set to represent a salary whereas
the <a class="reference internal" href="#ucamstaffoncosts.salary.progression.Salary.base_per_annum" title="ucamstaffoncosts.salary.progression.Salary.base_per_annum"><code class="xref py py-attr docutils literal notranslate"><span class="pre">base_per_annum</span></code></a> may be <cite>None</cite> if this object does not represent a particular
per-annum base salary for that grade and point.</p>
<p>The <a class="reference internal" href="#ucamstaffoncosts.salary.progression.Salary.base_per_annum" title="ucamstaffoncosts.salary.progression.Salary.base_per_annum"><code class="xref py py-attr docutils literal notranslate"><span class="pre">base_per_annum</span></code></a> and <a class="reference internal" href="#ucamstaffoncosts.salary.progression.Salary.as_of_date" title="ucamstaffoncosts.salary.progression.Salary.as_of_date"><code class="xref py py-attr docutils literal notranslate"><span class="pre">as_of_date</span></code></a> attributes are optional and will
default to <cite>None</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts.salary.scales</span> <span class="k">import</span> <span class="n">Grade</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Salary</span><span class="p">(</span><span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_2</span><span class="p">,</span> <span class="s1">&#39;POINT_X&#39;</span><span class="p">)</span>
<span class="go">Salary(grade=&lt;Grade.GRADE_2: 3&gt;, point=&#39;POINT_X&#39;, base_per_annum=None, as_of_date=None)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Salary</span><span class="p">(</span><span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_2</span><span class="p">,</span> <span class="s1">&#39;POINT_X&#39;</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span>
<span class="gp">... </span>       <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="c1"># doctest: +NORMALIZE_WHITESPACE</span>
<span class="go">Salary(grade=&lt;Grade.GRADE_2: 3&gt;, point=&#39;POINT_X&#39;, base_per_annum=10000,</span>
<span class="go">       as_of_date=datetime.date(2017, 8, 1))</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="ucamstaffoncosts.salary.progression.Salary.grade">
<code class="descname">grade</code><a class="headerlink" href="#ucamstaffoncosts.salary.progression.Salary.grade" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#ucamstaffoncosts.Grade" title="ucamstaffoncosts.Grade"><code class="xref py py-class docutils literal notranslate"><span class="pre">Grade</span></code></a> representing the grade of the employee.</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.salary.progression.Salary.point">
<code class="descname">point</code><a class="headerlink" href="#ucamstaffoncosts.salary.progression.Salary.point" title="Permalink to this definition">¶</a></dt>
<dd><p>A string giving the name of the salary spine point within the grade of the employee.</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.salary.progression.Salary.base_per_annum">
<code class="descname">base_per_annum</code><a class="headerlink" href="#ucamstaffoncosts.salary.progression.Salary.base_per_annum" title="Permalink to this definition">¶</a></dt>
<dd><p>If this salary has been converted to a per annum base salary, this is the per annum salary
in pounds sterling. Otherwise, it is <cite>None</cite>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.salary.progression.Salary.as_of_date">
<code class="descname">as_of_date</code><a class="headerlink" href="#ucamstaffoncosts.salary.progression.Salary.as_of_date" title="Permalink to this definition">¶</a></dt>
<dd><p>If this salary has been converted to a per annum base salary, this is the effective date of
the mapping table used.</p>
</dd></dl>

<dl class="method">
<dt id="ucamstaffoncosts.salary.progression.Salary.with_base">
<code class="descname">with_base</code><span class="sig-paren">(</span><em>base_per_annum</em>, <em>as_of_date</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/salary/progression.html#Salary.with_base"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.progression.Salary.with_base" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a copy of this salary with the <a class="reference internal" href="#ucamstaffoncosts.salary.progression.Salary.base_per_annum" title="ucamstaffoncosts.salary.progression.Salary.base_per_annum"><code class="xref py py-attr docutils literal notranslate"><span class="pre">base_per_annum</span></code></a> and <a class="reference internal" href="#ucamstaffoncosts.salary.progression.Salary.as_of_date" title="ucamstaffoncosts.salary.progression.Salary.as_of_date"><code class="xref py py-attr docutils literal notranslate"><span class="pre">as_of_date</span></code></a>
modified.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts.salary.scales</span> <span class="k">import</span> <span class="n">Grade</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s1</span> <span class="o">=</span> <span class="n">Salary</span><span class="p">(</span><span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_2</span><span class="p">,</span> <span class="s1">&#39;POINT_X&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s1</span>
<span class="go">Salary(grade=&lt;Grade.GRADE_2: 3&gt;, point=&#39;POINT_X&#39;, base_per_annum=None, as_of_date=None)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">with_base</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span> <span class="c1"># doctest: +NORMALIZE_WHITESPACE</span>
<span class="go">Salary(grade=&lt;Grade.GRADE_2: 3&gt;, point=&#39;POINT_X&#39;, base_per_annum=10000,</span>
<span class="go">       as_of_date=datetime.date(2017, 8, 1))</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ucamstaffoncosts.salary.progression.SalaryChange">
<em class="property">class </em><code class="descclassname">ucamstaffoncosts.salary.progression.</code><code class="descname">SalaryChange</code><a class="reference internal" href="_modules/ucamstaffoncosts/salary/progression.html#SalaryChange"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.progression.SalaryChange" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.namedtuple</span></code> subclass which represents a change of salary for an
employee on a particular date.</p>
<dl class="attribute">
<dt id="ucamstaffoncosts.salary.progression.SalaryChange.date">
<code class="descname">date</code><a class="headerlink" href="#ucamstaffoncosts.salary.progression.SalaryChange.date" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code> on which the salary change happened.</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.salary.progression.SalaryChange.update_salary">
<code class="descname">update_salary</code><a class="headerlink" href="#ucamstaffoncosts.salary.progression.SalaryChange.update_salary" title="Permalink to this definition">¶</a></dt>
<dd><p>A callable which takes a <a class="reference internal" href="#ucamstaffoncosts.salary.progression.Salary" title="ucamstaffoncosts.salary.progression.Salary"><code class="xref py py-class docutils literal notranslate"><span class="pre">Salary</span></code></a> object and returns a (new <a class="reference internal" href="#ucamstaffoncosts.salary.progression.Salary" title="ucamstaffoncosts.salary.progression.Salary"><code class="xref py py-class docutils literal notranslate"><span class="pre">Salary</span></code></a>,
reason) pair with the updated salary. The reason is a human-readable string describing the
reason for the change.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ucamstaffoncosts.salary.progression.fold">
<code class="descclassname">ucamstaffoncosts.salary.progression.</code><code class="descname">fold</code><span class="sig-paren">(</span><em>changes</em>, <em>initial_salary=None</em>, <em>elide_null_changes=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/salary/progression.html#fold"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.progression.fold" title="Permalink to this definition">¶</a></dt>
<dd><p>We will use the following list of <a class="reference internal" href="#ucamstaffoncosts.salary.progression.SalaryChange" title="ucamstaffoncosts.salary.progression.SalaryChange"><code class="xref py py-class docutils literal notranslate"><span class="pre">SalaryChange</span></code></a> tuples as examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts.salary.scales</span> <span class="k">import</span> <span class="n">Grade</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">changes</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="n">SalaryChange</span><span class="p">(</span><span class="n">date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                 <span class="n">update_salary</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;pass through salary&#39;</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="n">SalaryChange</span><span class="p">(</span><span class="n">date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                 <span class="n">update_salary</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="p">(</span><span class="n">Salary</span><span class="p">(</span><span class="n">grade</span><span class="o">=</span><span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_1</span><span class="p">,</span> <span class="n">point</span><span class="o">=</span><span class="s1">&#39;P1&#39;</span><span class="p">),</span>
<span class="gp">... </span>                                          <span class="s1">&#39;set grade and point&#39;</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="n">SalaryChange</span><span class="p">(</span><span class="n">date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                 <span class="n">update_salary</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="p">(</span><span class="n">Salary</span><span class="p">(</span><span class="n">grade</span><span class="o">=</span><span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_1</span><span class="p">,</span> <span class="n">point</span><span class="o">=</span><span class="s1">&#39;P1&#39;</span><span class="p">),</span>
<span class="gp">... </span>                                          <span class="s1">&#39;null change&#39;</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="n">SalaryChange</span><span class="p">(</span><span class="n">date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                 <span class="n">update_salary</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="p">(</span><span class="n">Salary</span><span class="p">(</span><span class="n">grade</span><span class="o">=</span><span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_1</span><span class="p">,</span> <span class="n">point</span><span class="o">=</span><span class="s1">&#39;P2&#39;</span><span class="p">),</span>
<span class="gp">... </span>                                          <span class="s1">&#39;point -&gt; P2&#39;</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="n">SalaryChange</span><span class="p">(</span><span class="n">date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                 <span class="n">update_salary</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="p">(</span><span class="n">Salary</span><span class="p">(</span><span class="n">grade</span><span class="o">=</span><span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_2</span><span class="p">,</span> <span class="n">point</span><span class="o">=</span><span class="s1">&#39;P2&#39;</span><span class="p">),</span>
<span class="gp">... </span>                                          <span class="s1">&#39;grade -&gt; G2&#39;</span><span class="p">)),</span>
<span class="gp">... </span><span class="p">]</span>
</pre></div>
</div>
<p>If <em>elide_null_changes</em> is False, changes which do not change the salary are still reported:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fmt_str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{date!s: &lt;12}</span><span class="s1"> | </span><span class="si">{reason: &lt;20}</span><span class="s1"> | </span><span class="si">{grade!s: &lt;16}</span><span class="s1"> | </span><span class="si">{point!s: &lt;5}</span><span class="s1">&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">fold</span><span class="p">(</span><span class="n">changes</span><span class="p">,</span> <span class="n">elide_null_changes</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">fmt_str</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">row</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()))</span> <span class="c1"># doctest: +NORMALIZE_WHITESPACE</span>
<span class="go">2017-01-01   | pass through salary  | None             | None</span>
<span class="go">2017-01-01   | set grade and point  | Grade.GRADE_1    | P1</span>
<span class="go">2017-02-01   | null change          | Grade.GRADE_1    | P1</span>
<span class="go">2017-03-01   | point -&gt; P2          | Grade.GRADE_1    | P2</span>
<span class="go">2017-04-01   | grade -&gt; G2          | Grade.GRADE_2    | P2</span>
</pre></div>
</div>
<p>The default is for <em>elide_null_changes</em> to be <code class="docutils literal notranslate"><span class="pre">True</span></code> which means that changes which do not
change the salary are swallowed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">fold</span><span class="p">(</span><span class="n">changes</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">fmt_str</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">row</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()))</span> <span class="c1"># doctest: +NORMALIZE_WHITESPACE</span>
<span class="go">2017-01-01   | set grade and point  | Grade.GRADE_1    | P1</span>
<span class="go">2017-03-01   | point -&gt; P2          | Grade.GRADE_1    | P2</span>
<span class="go">2017-04-01   | grade -&gt; G2          | Grade.GRADE_2    | P2</span>
</pre></div>
</div>
<p>Note that the default grade and point are <code class="docutils literal notranslate"><span class="pre">None</span></code>. An initial salary can be set via
<em>initial_salary</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">initial_salary</span> <span class="o">=</span> <span class="n">Salary</span><span class="p">(</span><span class="n">grade</span><span class="o">=</span><span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_2</span><span class="p">,</span> <span class="n">point</span><span class="o">=</span><span class="s1">&#39;P5&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">fold</span><span class="p">(</span><span class="n">changes</span><span class="p">,</span> <span class="n">initial_salary</span><span class="o">=</span><span class="n">initial_salary</span><span class="p">,</span> <span class="n">elide_null_changes</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">fmt_str</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">row</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()))</span> <span class="c1"># doctest: +NORMALIZE_WHITESPACE</span>
<span class="go">2017-01-01   | pass through salary  | Grade.GRADE_2    | P5</span>
<span class="go">2017-01-01   | set grade and point  | Grade.GRADE_1    | P1</span>
<span class="go">2017-02-01   | null change          | Grade.GRADE_1    | P1</span>
<span class="go">2017-03-01   | point -&gt; P2          | Grade.GRADE_1    | P2</span>
<span class="go">2017-04-01   | grade -&gt; G2          | Grade.GRADE_2    | P2</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ucamstaffoncosts.salary.progression.map_grade_and_points">
<code class="descclassname">ucamstaffoncosts.salary.progression.</code><code class="descname">map_grade_and_points</code><span class="sig-paren">(</span><em>changes</em>, <em>salary_mapping_tables_kwargs={}</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/salary/progression.html#map_grade_and_points"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.progression.map_grade_and_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Take an iterable yielding <a class="reference internal" href="#ucamstaffoncosts.salary.progression.SalaryChange" title="ucamstaffoncosts.salary.progression.SalaryChange"><code class="xref py py-class docutils literal notranslate"><span class="pre">SalaryChange</span></code></a> or callable objects and map the grade and
point of each <a class="reference internal" href="#ucamstaffoncosts.salary.progression.Salary" title="ucamstaffoncosts.salary.progression.Salary"><code class="xref py py-class docutils literal notranslate"><span class="pre">Salary</span></code></a> to the base per annum salary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>changes</strong> – iterable yielding salary changes</li>
<li><strong>salary_mapping_tables_kwargs</strong> – additional kwargs to pass to
<a class="reference internal" href="#ucamstaffoncosts.salary.progression.salary_mapping_tables" title="ucamstaffoncosts.salary.progression.salary_mapping_tables"><code class="xref py py-func docutils literal notranslate"><span class="pre">salary_mapping_tables()</span></code></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>To illustrate functionality, we’ll make use of the same example table as used in the
<a class="reference internal" href="#module-ucamstaffoncosts.salary.scales" title="ucamstaffoncosts.salary.scales"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ucamstaffoncosts.salary.scales</span></code></a> documentation.  We can model a Grade 2 employee
starting on the lowest point in the following way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts</span> <span class="k">import</span> <span class="n">Grade</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts.salary.scales</span> <span class="k">import</span> <span class="n">EXAMPLE_SALARY_SCALES</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grade</span> <span class="o">=</span> <span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">starting_point_for_grade</span><span class="p">(</span><span class="n">grade</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c1"># start date on contract</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">next_anniversary_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">increments</span> <span class="o">=</span> <span class="n">anniversary_increments</span><span class="p">(</span><span class="n">next_anniversary_date</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">salaries</span> <span class="o">=</span> <span class="n">map_grade_and_points</span><span class="p">(</span><span class="n">compose_changes</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">set_salary</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">grade</span><span class="p">,</span> <span class="n">point</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">increments</span>
<span class="gp">... </span><span class="p">),</span> <span class="n">salary_mapping_tables_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;table&#39;</span><span class="p">:</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fmt_str</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;</span><span class="si">{date!s: &lt;12}</span><span class="s1"> | </span><span class="si">{reason: &lt;35}</span><span class="s1"> | </span><span class="si">{grade!s: &lt;16}</span><span class="s1"> | </span><span class="si">{point!s: &lt;5}</span><span class="s1"> | &#39;</span>
<span class="gp">... </span>           <span class="s1">&#39;</span><span class="si">{base_salary: &gt;8,d}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">fold</span><span class="p">(</span><span class="n">until</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">salaries</span><span class="p">),</span> <span class="n">elide_null_changes</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">fmt_str</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">row</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()))</span>
<span class="go">2017-03-05   | set salary                          | Grade.GRADE_2    | P3    |   14,767</span>
<span class="go">2017-06-01   | anniversary: point P3 to P4         | Grade.GRADE_2    | P4    |   15,052</span>
<span class="go">2017-08-01   | new salary table                    | Grade.GRADE_2    | P4    |   15,417</span>
<span class="go">2018-06-01   | anniversary: point P4 to P5         | Grade.GRADE_2    | P5    |   15,721</span>
<span class="go">2018-08-01   | new salary table (approximate)      | Grade.GRADE_2    | P5    |   16,035</span>
<span class="go">2019-06-01   | anniversary: no increment           | Grade.GRADE_2    | P5    |   16,035</span>
<span class="go">2019-08-01   | new salary table (approximate)      | Grade.GRADE_2    | P5    |   16,356</span>
<span class="go">2020-06-01   | anniversary: no increment           | Grade.GRADE_2    | P5    |   16,356</span>
<span class="go">2020-08-01   | new salary table (approximate)      | Grade.GRADE_2    | P5    |   16,683</span>
<span class="go">2021-06-01   | anniversary: no increment           | Grade.GRADE_2    | P5    |   16,683</span>
<span class="go">2021-08-01   | new salary table (approximate)      | Grade.GRADE_2    | P5    |   17,017</span>
<span class="go">2022-06-01   | anniversary: no increment           | Grade.GRADE_2    | P5    |   17,017</span>
<span class="go">2022-08-01   | new salary table (approximate)      | Grade.GRADE_2    | P5    |   17,357</span>
</pre></div>
</div>
<p>Passing an empty iterable works as you’d expect:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">map_grade_and_points</span><span class="p">([]))</span>
<span class="go">[]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ucamstaffoncosts.salary.progression.compose_changes">
<code class="descclassname">ucamstaffoncosts.salary.progression.</code><code class="descname">compose_changes</code><span class="sig-paren">(</span><em>*change_iterables</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/salary/progression.html#compose_changes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.progression.compose_changes" title="Permalink to this definition">¶</a></dt>
<dd><p>Compose a several iterables yielding <a class="reference internal" href="#ucamstaffoncosts.salary.progression.SalaryChange" title="ucamstaffoncosts.salary.progression.SalaryChange"><code class="xref py py-class docutils literal notranslate"><span class="pre">SalaryChange</span></code></a> tuples into a single iterable
which yields the changes in ascending date order.</p>
</dd></dl>

<dl class="function">
<dt id="ucamstaffoncosts.salary.progression.until">
<code class="descclassname">ucamstaffoncosts.salary.progression.</code><code class="descname">until</code><span class="sig-paren">(</span><em>end_date</em>, <em>changes</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/salary/progression.html#until"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.progression.until" title="Permalink to this definition">¶</a></dt>
<dd><p>Keep iterating over the salary changes in <em>changes</em> until the first date which is greater than
<em>or equal</em> to <em>end_date</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">start_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">end_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">increments</span> <span class="o">=</span> <span class="n">anniversary_increments</span><span class="p">(</span><span class="n">start_date</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">change</span> <span class="ow">in</span> <span class="n">until</span><span class="p">(</span><span class="n">end_date</span><span class="p">,</span> <span class="n">increments</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">change</span><span class="o">.</span><span class="n">date</span><span class="p">)</span>
<span class="go">2018-06-01</span>
<span class="go">2019-06-01</span>
<span class="go">2020-06-01</span>
<span class="go">2021-06-01</span>
</pre></div>
</div>
<p>If <em>end_date</em> is not a <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code>, a <code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code> is raised:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">until</span><span class="p">(</span><span class="s1">&#39;2022-05-01&#39;</span><span class="p">,</span> <span class="n">anniversary_increments</span><span class="p">(</span><span class="n">start_date</span><span class="p">)))</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">TypeError</span>: <span class="n">until must be passed a date object</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ucamstaffoncosts.salary.progression.anniversary_increments">
<code class="descclassname">ucamstaffoncosts.salary.progression.</code><code class="descname">anniversary_increments</code><span class="sig-paren">(</span><em>next_anniversary_date</em>, <em>table=&lt;ucamstaffoncosts.salary.scales.SalaryScaleTable object&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/salary/progression.html#anniversary_increments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.progression.anniversary_increments" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterable of <a class="reference internal" href="#ucamstaffoncosts.salary.progression.SalaryChange" title="ucamstaffoncosts.salary.progression.SalaryChange"><code class="xref py py-class docutils literal notranslate"><span class="pre">SalaryChange</span></code></a> tuples representing the increments which happen
on the anniversary of employment starting from <em>next_anniversary_date</em>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">increments</span> <span class="o">=</span> <span class="n">anniversary_increments</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">increments</span><span class="p">)</span><span class="o">.</span><span class="n">date</span>
<span class="go">datetime.date(2017, 5, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">increments</span><span class="p">)</span><span class="o">.</span><span class="n">date</span>
<span class="go">datetime.date(2018, 5, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">increments</span><span class="p">)</span><span class="o">.</span><span class="n">date</span>
<span class="go">datetime.date(2019, 5, 1)</span>
</pre></div>
</div>
<p>If <em>next_anniversary_date</em> is not a <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code>, a <code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code> is raised:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">anniversary_increments</span><span class="p">(</span><span class="s1">&#39;2017-05-01&#39;</span><span class="p">))</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">TypeError</span>: <span class="n">anniversary_increments must be passed a date object</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ucamstaffoncosts.salary.progression.set_salary">
<code class="descclassname">ucamstaffoncosts.salary.progression.</code><code class="descname">set_salary</code><span class="sig-paren">(</span><em>from_date</em>, <em>grade</em>, <em>point</em>, <em>reason=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/salary/progression.html#set_salary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.progression.set_salary" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterable which represents a change in grade and/or point.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts</span> <span class="k">import</span> <span class="n">Grade</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts.salary.scales</span> <span class="k">import</span> <span class="n">EXAMPLE_SALARY_SCALES</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grade</span> <span class="o">=</span> <span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">starting_point_for_grade</span><span class="p">(</span><span class="n">grade</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">set_salary</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">grade</span><span class="p">,</span> <span class="n">point</span><span class="p">))</span> <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">SalaryChange(date=datetime.date(2017, 1, 1), update_salary=...)</span>
</pre></div>
</div>
<p>If <em>from_date</em> is not a <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code>, a <code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code> is raised:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">set_salary</span><span class="p">(</span><span class="s1">&#39;2017-01-01&#39;</span><span class="p">,</span> <span class="n">grade</span><span class="p">,</span> <span class="n">point</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">TypeError</span>: <span class="n">set_salary must be passed a date object</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ucamstaffoncosts.salary.progression.merge_priority_iterables">
<code class="descclassname">ucamstaffoncosts.salary.progression.</code><code class="descname">merge_priority_iterables</code><span class="sig-paren">(</span><em>iterables</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/salary/progression.html#merge_priority_iterables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.progression.merge_priority_iterables" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a priority queue over <em>iterables</em> which is itself iterable. Each iterable which forms
part of the queue must return objects of the form (deadline, …). As the queue is iterated
over, the item with the <em>smallest</em> deadline from all of the iterators is selected and
(deadline, index, value) is yielded where “index” is the 0-based index of the iterable which
yielded the value in <em>iterables</em>.</p>
<p>If two iterables are yielding values with the same deadline at the same time, the one which was
earlier in the <em>iterables</em> sequence is yielded first.</p>
<p>It is envisaged that all iterables passed to the function will themselves yield values with
monotonically increasing deadline. The implementation does not attempt to enforce this.</p>
<p>As an example, use two lists as iterables which specify deadlines in terms of date objects:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">it0</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">31</span><span class="p">),</span> <span class="s1">&#39;it0_0&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="s1">&#39;it0_1&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;it0_2&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;it0_3&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it1</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;it1_0&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">31</span><span class="p">),</span> <span class="s1">&#39;it1_1&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="s1">&#39;it1_2&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;it1_3&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">merge_priority_iterables</span><span class="p">([</span><span class="n">it0</span><span class="p">,</span> <span class="n">it1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>  <span class="c1"># doctest: +NORMALIZE_WHITESPACE</span>
<span class="go">[(datetime.date(2018, 1, 1), 1, &#39;it1_0&#39;), (datetime.date(2018, 3, 31), 0, &#39;it0_0&#39;),</span>
<span class="go">(datetime.date(2018, 3, 31), 1, &#39;it1_1&#39;), (datetime.date(2018, 4, 5), 0, &#39;it0_1&#39;),</span>
<span class="go">(datetime.date(2018, 4, 7), 1, &#39;it1_2&#39;), (datetime.date(2018, 6, 1), 0, &#39;it0_2&#39;),</span>
<span class="go">(datetime.date(2018, 6, 1), 0, &#39;it0_3&#39;), (datetime.date(2018, 6, 2), 1, &#39;it1_3&#39;)]</span>
</pre></div>
</div>
<p>Infinite iterables are also supported:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">itertools</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it3</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span>
<span class="gp">... </span>    <span class="k">lambda</span> <span class="n">o</span><span class="p">:</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="o">*</span><span class="n">o</span><span class="p">),</span> <span class="n">f</span><span class="s1">&#39;it3_</span><span class="si">{o}</span><span class="s1">&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">itertools</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">merge_priority_iterables</span><span class="p">([</span><span class="n">it0</span><span class="p">,</span> <span class="n">it1</span><span class="p">,</span> <span class="n">it3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">takewhile</span><span class="p">(</span>
<span class="gp">... </span>    <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">q</span><span class="p">))</span>  <span class="c1"># doctest: +NORMALIZE_WHITESPACE</span>
<span class="go">[(datetime.date(2018, 1, 1), 1, &#39;it1_0&#39;), (datetime.date(2018, 1, 1), 2, &#39;it3_0&#39;),</span>
<span class="go">(datetime.date(2018, 1, 31), 2, &#39;it3_1&#39;), (datetime.date(2018, 3, 2), 2, &#39;it3_2&#39;),</span>
<span class="go">(datetime.date(2018, 3, 31), 0, &#39;it0_0&#39;), (datetime.date(2018, 3, 31), 1, &#39;it1_1&#39;),</span>
<span class="go">(datetime.date(2018, 4, 1), 2, &#39;it3_3&#39;), (datetime.date(2018, 4, 5), 0, &#39;it0_1&#39;),</span>
<span class="go">(datetime.date(2018, 4, 7), 1, &#39;it1_2&#39;), (datetime.date(2018, 5, 1), 2, &#39;it3_4&#39;),</span>
<span class="go">(datetime.date(2018, 5, 31), 2, &#39;it3_5&#39;), (datetime.date(2018, 6, 1), 0, &#39;it0_2&#39;),</span>
<span class="go">(datetime.date(2018, 6, 1), 0, &#39;it0_3&#39;), (datetime.date(2018, 6, 2), 1, &#39;it1_3&#39;),</span>
<span class="go">(datetime.date(2018, 6, 30), 2, &#39;it3_6&#39;), (datetime.date(2018, 7, 30), 2, &#39;it3_7&#39;)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ucamstaffoncosts.salary.progression.salary_mapping_tables">
<code class="descclassname">ucamstaffoncosts.salary.progression.</code><code class="descname">salary_mapping_tables</code><span class="sig-paren">(</span><em>from_date</em>, <em>table=&lt;ucamstaffoncosts.salary.scales.SalaryScaleTable object&gt;</em>, <em>approximate_negotiated_annual_change=Fraction(51</em>, <em>50)</em>, <em>negotiated_annual_change_month=None</em>, <em>negotiated_annual_change_day=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/salary/progression.html#salary_mapping_tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.progression.salary_mapping_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterable which yields (date, mapping, is_approximate) tuples. The date in each tuple
refers to an effective-from date for a point to salary mapping and the mapping is a dict
mapping point names to pounds sterling full-time equivalent salaries. The first date returned
is guaranteed to be before or equal to <em>from_date</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>from_date</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">date.datetime</span></code>) – date from which mappings are required</li>
<li><strong>table</strong> (<a class="reference internal" href="#ucamstaffoncosts.salary.scales.SalaryScaleTable" title="ucamstaffoncosts.salary.scales.SalaryScaleTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">SalaryScaleTable</span></code></a>) – salary scale table to use</li>
<li><strong>approximate_negotiated_annual_change</strong> – multiplier to use for annual negotiated salary
change for years when a point table is unavailable</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Where present, actual mapping tables are used. For these tables, <em>is_approximate</em> will be
<code class="docutils literal notranslate"><span class="pre">False</span></code>. For annual negotiated changes where the table is not available, an approximation is
used: the previous year’s salaries are multiplied by <em>approximate_negotiated_annual_change</em>.
These approximations are always made relative to the latest actual salaries available even if
one is required to approximate into the past. For these tables, <em>is_approximate</em> will be
<code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>The date at which this change happens is taken from the <em>latest</em> actual change recorded in the
salary table. It can be overridden via the <em>negotiated_annual_change_month</em> and
<em>negotiated_annual_change_day</em> parameters. These parameters are 1-based day and month indices
as accepted by <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code>.</p>
<p>To illustrate, we will use the example table from the <a class="reference internal" href="#module-ucamstaffoncosts.salary.scales" title="ucamstaffoncosts.salary.scales"><code class="xref py py-mod docutils literal notranslate"><span class="pre">scales</span></code></a>
module.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pkg_resources</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">yaml</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ucamstaffoncosts.salary.scales</span> <span class="k">import</span> <span class="n">SalaryScaleTable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">SalaryScaleTable</span><span class="p">(</span><span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_string</span><span class="p">(</span>
<span class="gp">... </span>   <span class="s1">&#39;ucamstaffoncosts&#39;</span><span class="p">,</span> <span class="s1">&#39;data/example_salary_scales.yaml&#39;</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">from_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mappings</span> <span class="o">=</span> <span class="n">salary_mapping_tables</span><span class="p">(</span><span class="n">from_date</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="n">table</span><span class="p">)</span>
</pre></div>
</div>
<p>The first date returned will be before <em>from_date</em> since it is the effective-from date of the
appropriate salary mapping table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">date</span><span class="p">,</span> <span class="n">mapping1</span><span class="p">,</span> <span class="n">is_approximate</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">mappings</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_approximate</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date</span> <span class="o">&lt;</span> <span class="n">from_date</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date</span>
<span class="go">datetime.date(2016, 8, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="p">,</span> <span class="n">expected_mapping</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">point_to_salary_map_for_date</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping1</span> <span class="o">==</span> <span class="n">expected_mapping</span>
<span class="go">True</span>
</pre></div>
</div>
<p>The mapping returned for the next date will also match the one from the table as the table has
an exact salary map:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">date</span><span class="p">,</span> <span class="n">mapping2</span><span class="p">,</span> <span class="n">is_approximate</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">mappings</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_approximate</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date</span>
<span class="go">datetime.date(2017, 8, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping1</span> <span class="o">==</span> <span class="n">mapping2</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="p">,</span> <span class="n">expected_mapping</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">point_to_salary_map_for_date</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping2</span> <span class="o">==</span> <span class="n">expected_mapping</span>
<span class="go">True</span>
</pre></div>
</div>
<p>However, the third date will be a new approximated mapping which is not present in the original
table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">date</span><span class="p">,</span> <span class="n">mapping3</span><span class="p">,</span> <span class="n">is_approximate</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">mappings</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_approximate</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date</span>
<span class="go">datetime.date(2018, 8, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping2</span> <span class="o">==</span> <span class="n">mapping3</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="p">,</span> <span class="n">non_extrapolated_mapping</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">point_to_salary_map_for_date</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping3</span> <span class="o">==</span> <span class="n">non_extrapolated_mapping</span>
<span class="go">False</span>
</pre></div>
</div>
<p>This approximation should be a 2% rise over the previous value (although it is rounded to the
nearest integer):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mapping2</span> <span class="o">==</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;P1&#39;</span><span class="p">:</span> <span class="mi">14304</span><span class="p">,</span> <span class="s1">&#39;P2&#39;</span><span class="p">:</span> <span class="mi">14675</span><span class="p">,</span> <span class="s1">&#39;P3&#39;</span><span class="p">:</span> <span class="mi">15126</span><span class="p">,</span> <span class="s1">&#39;P4&#39;</span><span class="p">:</span> <span class="mi">15417</span><span class="p">,</span> <span class="s1">&#39;P5&#39;</span><span class="p">:</span> <span class="mi">15721</span><span class="p">,</span> <span class="s1">&#39;P6&#39;</span><span class="p">:</span> <span class="mi">16035</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;P7&#39;</span><span class="p">:</span> <span class="mi">16341</span><span class="p">,</span> <span class="s1">&#39;P8&#39;</span><span class="p">:</span> <span class="mi">16654</span><span class="p">}</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="nb">abs</span><span class="p">((</span><span class="n">mapping3</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">/</span><span class="n">v</span><span class="p">)</span> <span class="o">-</span> <span class="mf">1.02</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-4</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">mapping2</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
<span class="go">[True, True, True, True, True, True, True, True]</span>
</pre></div>
</div>
<p>Finally, the fourth date’s mapping should be an approximation which is a further 2% rise:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">date</span><span class="p">,</span> <span class="n">mapping4</span><span class="p">,</span> <span class="n">is_approximate</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">mappings</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_approximate</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date</span>
<span class="go">datetime.date(2019, 8, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping3</span> <span class="o">==</span> <span class="n">mapping4</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="nb">abs</span><span class="p">((</span><span class="n">mapping4</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">/</span><span class="n">v</span><span class="p">)</span> <span class="o">-</span> <span class="mf">1.02</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-4</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">mapping3</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
<span class="go">[True, True, True, True, True, True, True, True]</span>
</pre></div>
</div>
</dd></dl>

</div>
<span class="target" id="module-ucamstaffoncosts.salary.scales"></span><div class="section" id="salary-scales">
<h3>Salary scales<a class="headerlink" href="#salary-scales" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="#module-ucamstaffoncosts.salary.scales" title="ucamstaffoncosts.salary.scales"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ucamstaffoncosts.salary.scales</span></code></a> module provides a mapping from grade and salary scale
point to an annual full-time equivalent salary in pounds sterling. Optionally, this may include a
date for which this mapping is required and the salary table will return the result from the latest
table which has an effective-from date before or equal to that one.</p>
<p>In this documentation, we shall use a subset of the full salary table. The YAML source for this
table is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># This is an example salary scales table used for documentation and testing.</span>
<span class="n">grades</span><span class="p">:</span>
<span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">GRADE_1</span>
  <span class="n">scale</span><span class="p">:</span>
  <span class="o">-</span> <span class="p">{</span><span class="n">isContribution</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;X1&#39;</span><span class="p">,</span> <span class="n">point</span><span class="p">:</span> <span class="n">P1</span><span class="p">}</span>
  <span class="o">-</span> <span class="p">{</span><span class="n">isContribution</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;X2&#39;</span><span class="p">,</span> <span class="n">point</span><span class="p">:</span> <span class="n">P2</span><span class="p">}</span>
  <span class="o">-</span> <span class="p">{</span><span class="n">isContribution</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;X3&#39;</span><span class="p">,</span> <span class="n">point</span><span class="p">:</span> <span class="n">P3</span><span class="p">}</span>
  <span class="o">-</span> <span class="p">{</span><span class="n">isContribution</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;X4&#39;</span><span class="p">,</span> <span class="n">point</span><span class="p">:</span> <span class="n">P4</span><span class="p">}</span>
<span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">GRADE_2</span>
  <span class="n">scale</span><span class="p">:</span>
  <span class="o">-</span> <span class="p">{</span><span class="n">isContribution</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;Y1&#39;</span><span class="p">,</span> <span class="n">point</span><span class="p">:</span> <span class="n">P3</span><span class="p">}</span>
  <span class="o">-</span> <span class="p">{</span><span class="n">isContribution</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;Y2&#39;</span><span class="p">,</span> <span class="n">point</span><span class="p">:</span> <span class="n">P4</span><span class="p">}</span>
  <span class="o">-</span> <span class="p">{</span><span class="n">isContribution</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;Y3&#39;</span><span class="p">,</span> <span class="n">point</span><span class="p">:</span> <span class="n">P5</span><span class="p">}</span>
  <span class="o">-</span> <span class="p">{</span><span class="n">isContribution</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;Y4&#39;</span><span class="p">,</span> <span class="n">point</span><span class="p">:</span> <span class="n">P6</span><span class="p">}</span>
<span class="n">salaries</span><span class="p">:</span>
<span class="o">-</span> <span class="n">effectiveDate</span><span class="p">:</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">01</span>
  <span class="n">mapping</span><span class="p">:</span> <span class="p">{</span><span class="n">P1</span><span class="p">:</span> <span class="mi">13965</span><span class="p">,</span> <span class="n">P2</span><span class="p">:</span> <span class="mi">14327</span><span class="p">,</span> <span class="n">P3</span><span class="p">:</span> <span class="mi">14767</span><span class="p">,</span>
    <span class="n">P4</span><span class="p">:</span> <span class="mi">15052</span><span class="p">,</span> <span class="n">P5</span><span class="p">:</span> <span class="mi">15356</span><span class="p">,</span> <span class="n">P6</span><span class="p">:</span> <span class="mi">15670</span><span class="p">,</span> <span class="n">P7</span><span class="p">:</span> <span class="mi">15976</span><span class="p">,</span> <span class="n">P8</span><span class="p">:</span> <span class="mi">16289</span><span class="p">}</span>
<span class="o">-</span> <span class="n">effectiveDate</span><span class="p">:</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">01</span>
  <span class="n">mapping</span><span class="p">:</span> <span class="p">{</span><span class="n">P1</span><span class="p">:</span> <span class="mi">14304</span><span class="p">,</span> <span class="n">P2</span><span class="p">:</span> <span class="mi">14675</span><span class="p">,</span> <span class="n">P3</span><span class="p">:</span> <span class="mi">15126</span><span class="p">,</span>
    <span class="n">P4</span><span class="p">:</span> <span class="mi">15417</span><span class="p">,</span> <span class="n">P5</span><span class="p">:</span> <span class="mi">15721</span><span class="p">,</span> <span class="n">P6</span><span class="p">:</span> <span class="mi">16035</span><span class="p">,</span> <span class="n">P7</span><span class="p">:</span> <span class="mi">16341</span><span class="p">,</span> <span class="n">P8</span><span class="p">:</span> <span class="mi">16654</span><span class="p">}</span>
</pre></div>
</div>
<p>The table is available via the <code class="xref py py-data docutils literal notranslate"><span class="pre">ucamstaffoncosts.salary.scales.EXAMPLE_SALARY_SCALES</span></code>
constant:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="p">,</span> <span class="n">SalaryScaleTable</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>For real data, you would want to use the <code class="xref py py-data docutils literal notranslate"><span class="pre">SALARY_SCALES</span></code> constant which is a
pre-initialised table using the most recent data available. For all calls which take a table
parameter, this table is the default.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">SALARY_SCALES</span><span class="p">,</span> <span class="n">SalaryScaleTable</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>There are various clinical scales which are not represented in this table. For those, you would
want to use the <code class="xref py py-data docutils literal notranslate"><span class="pre">CLINICAL_SCALES</span></code> constant</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">CLINICAL_SCALES</span><span class="p">,</span> <span class="n">SalaryScaleTable</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Using the table, one can find, as an example, the starting salary for grade 2 as of the 1st January
2017:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">effective_from_date</span><span class="p">,</span> <span class="n">mapping</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">point_to_salary_map_for_date</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">effective_from_date</span>
<span class="go">datetime.date(2016, 8, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span><span class="p">[</span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">scale_for_grade</span><span class="p">(</span><span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_2</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">point</span><span class="p">]</span>
<span class="go">14767</span>
</pre></div>
</div>
<p>Or, what their salary will be after their second anniversary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">grade</span> <span class="o">=</span> <span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">scale_for_grade</span><span class="p">(</span><span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_2</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">point</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">increment</span><span class="p">(</span><span class="n">grade</span><span class="p">,</span> <span class="n">point</span><span class="p">)</span> <span class="c1"># first anniversary</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">increment</span><span class="p">(</span><span class="n">grade</span><span class="p">,</span> <span class="n">point</span><span class="p">)</span> <span class="c1"># second anniversary</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># note: two years after start date</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">effective_from_date</span><span class="p">,</span> <span class="n">mapping</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">point_to_salary_map_for_date</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">effective_from_date</span>
<span class="go">datetime.date(2017, 8, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">second_anniversary_salary</span> <span class="o">=</span> <span class="n">mapping</span><span class="p">[</span><span class="n">point</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">second_anniversary_salary</span>
<span class="go">15721</span>
</pre></div>
</div>
<p>Note that the salary table is from the 2017 negotiated increment. No attempt is made to predict
negotiated increments into the future from this table.</p>
<p>On the next anniversary, the employee does not proceed to the next spine point since the employee
is now at the top non-contribution points for the grade. Hence, the salary will be the same:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">point</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">increment</span><span class="p">(</span><span class="n">grade</span><span class="p">,</span> <span class="n">point</span><span class="p">)</span> <span class="c1"># third anniversary</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># note: three years after start date</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">effective_from_date</span><span class="p">,</span> <span class="n">mapping</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">point_to_salary_map_for_date</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">effective_from_date</span>
<span class="go">datetime.date(2017, 8, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span><span class="p">[</span><span class="n">point</span><span class="p">]</span> <span class="o">==</span> <span class="n">second_anniversary_salary</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="class">
<dt id="ucamstaffoncosts.salary.scales.SalaryScaleTable">
<em class="property">class </em><code class="descclassname">ucamstaffoncosts.salary.scales.</code><code class="descname">SalaryScaleTable</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/salary/scales.html#SalaryScaleTable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.scales.SalaryScaleTable" title="Permalink to this definition">¶</a></dt>
<dd><p>An encapsulation of the <a class="reference external" href="https://www.hr.admin.cam.ac.uk/pay-benefits/salary-scales">salary scale table</a> available on the HR website.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>dict</em>) – a data table whose format is epitomised by the <a class="reference download internal" download="" href="_downloads/f8ea93b7d5a3535cb409ba5cd0dc6929/example_salary_scales.yaml"><code class="xref download docutils literal notranslate"><span class="pre">example</span></code></a> used in this documentation.</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="ucamstaffoncosts.salary.scales.SalaryScaleTable.ScaleRow">
<em class="property">class </em><code class="descname">ScaleRow</code><a class="reference internal" href="_modules/ucamstaffoncosts/salary/scales.html#SalaryScaleTable.ScaleRow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.scales.SalaryScaleTable.ScaleRow" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.namedtuple</span></code> subclass which represents a row from the salary scale
for a particular grade.</p>
<dl class="attribute">
<dt id="ucamstaffoncosts.salary.scales.SalaryScaleTable.ScaleRow.name">
<code class="descname">name</code><a class="headerlink" href="#ucamstaffoncosts.salary.scales.SalaryScaleTable.ScaleRow.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of this point on the salary scale</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.salary.scales.SalaryScaleTable.ScaleRow.point">
<code class="descname">point</code><a class="headerlink" href="#ucamstaffoncosts.salary.scales.SalaryScaleTable.ScaleRow.point" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of this point on the spine. This is the name used in the table returned by
<a class="reference internal" href="#ucamstaffoncosts.salary.scales.SalaryScaleTable.point_to_salary_map_for_date" title="ucamstaffoncosts.salary.scales.SalaryScaleTable.point_to_salary_map_for_date"><code class="xref py py-meth docutils literal notranslate"><span class="pre">point_to_salary_map_for_date()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ucamstaffoncosts.salary.scales.SalaryScaleTable.ScaleRow.is_contribution">
<code class="descname">is_contribution</code><a class="headerlink" href="#ucamstaffoncosts.salary.scales.SalaryScaleTable.ScaleRow.is_contribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Boolean indicating if this is a contribution point and not subject to annual
increments.</p>
</dd></dl>

</dd></dl>

<dl class="method">
<dt id="ucamstaffoncosts.salary.scales.SalaryScaleTable.increment">
<code class="descname">increment</code><span class="sig-paren">(</span><em>grade</em>, <em>point</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/salary/scales.html#SalaryScaleTable.increment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.scales.SalaryScaleTable.increment" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the salary scale point which is the next annual increment from the specified grade
and point. If there is no further increment, return the value of <em>point</em>. Note that <em>point</em>
is the <em>spine point</em>, name as used by the table returned by
<a class="reference internal" href="#ucamstaffoncosts.salary.scales.SalaryScaleTable.point_to_salary_map_for_date" title="ucamstaffoncosts.salary.scales.SalaryScaleTable.point_to_salary_map_for_date"><code class="xref py py-meth docutils literal notranslate"><span class="pre">point_to_salary_map_for_date()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>grade</strong> (<a class="reference internal" href="#ucamstaffoncosts.Grade" title="ucamstaffoncosts.Grade"><code class="xref py py-class docutils literal notranslate"><span class="pre">ucamstaffoncosts.Grade</span></code></a>) – grade of employee</li>
<li><strong>point</strong> (<em>str</em>) – existing spine point for employee</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Let’s look at the scale for grade 1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">scale_for_grade</span><span class="p">(</span><span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_1</span><span class="p">)</span> <span class="c1"># doctest: +NORMALIZE_WHITESPACE</span>
<span class="go">[ScaleRow(name=&#39;X1&#39;, point=&#39;P1&#39;, is_contribution=False),</span>
<span class="go">ScaleRow(name=&#39;X2&#39;, point=&#39;P2&#39;, is_contribution=False),</span>
<span class="go">ScaleRow(name=&#39;X3&#39;, point=&#39;P3&#39;, is_contribution=False),</span>
<span class="go">ScaleRow(name=&#39;X4&#39;, point=&#39;P4&#39;, is_contribution=True)]</span>
</pre></div>
</div>
<p>Normal increments will return the next point:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">increment</span><span class="p">(</span><span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_1</span><span class="p">,</span> <span class="s1">&#39;P1&#39;</span><span class="p">)</span>
<span class="go">&#39;P2&#39;</span>
</pre></div>
</div>
<p>Increments do not move to contribution points:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">increment</span><span class="p">(</span><span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_1</span><span class="p">,</span> <span class="s1">&#39;P3&#39;</span><span class="p">)</span>
<span class="go">&#39;P3&#39;</span>
</pre></div>
</div>
<p>Contribution points also do not increment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">increment</span><span class="p">(</span><span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_1</span><span class="p">,</span> <span class="s1">&#39;P4&#39;</span><span class="p">)</span>
<span class="go">&#39;P4&#39;</span>
</pre></div>
</div>
<p>Note that the spine point must be in the salary progression for the grade otherwise an
exception is raised:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">increment</span><span class="p">(</span><span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_1</span><span class="p">,</span> <span class="s1">&#39;P5&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ValueError</span>: <span class="n">point &quot;P5&quot; is not part of grade &quot;Grade.GRADE_1&quot;</span>
</pre></div>
</div>
<p>If the grade is <code class="docutils literal notranslate"><span class="pre">None</span></code>, the “increment” will always return the input grade.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">increment</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;P5&#39;</span><span class="p">)</span>
<span class="go">&#39;P5&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ucamstaffoncosts.salary.scales.SalaryScaleTable.scale_for_grade">
<code class="descname">scale_for_grade</code><span class="sig-paren">(</span><em>grade</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/salary/scales.html#SalaryScaleTable.scale_for_grade"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.scales.SalaryScaleTable.scale_for_grade" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the salary scale for a given grade. The scale is ordered in increasing order of
spine point so that they represent the progression through spine points from annual
increments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>grade</strong> (<a class="reference internal" href="#ucamstaffoncosts.Grade" title="ucamstaffoncosts.Grade"><code class="xref py py-class docutils literal notranslate"><span class="pre">ucamstaffoncosts.Grade</span></code></a>) – grade whose scale should be returned</td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">scale_for_grade</span><span class="p">(</span><span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_1</span><span class="p">)</span> <span class="c1"># doctest: +NORMALIZE_WHITESPACE</span>
<span class="go">[ScaleRow(name=&#39;X1&#39;, point=&#39;P1&#39;, is_contribution=False),</span>
<span class="go">ScaleRow(name=&#39;X2&#39;, point=&#39;P2&#39;, is_contribution=False),</span>
<span class="go">ScaleRow(name=&#39;X3&#39;, point=&#39;P3&#39;, is_contribution=False),</span>
<span class="go">ScaleRow(name=&#39;X4&#39;, point=&#39;P4&#39;, is_contribution=True)]</span>
</pre></div>
</div>
<p>Note that the grade <em>must</em> be a <a class="reference internal" href="#ucamstaffoncosts.Grade" title="ucamstaffoncosts.Grade"><code class="xref py py-class docutils literal notranslate"><span class="pre">Grade</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">scale_for_grade</span><span class="p">(</span><span class="s1">&#39;GRADE_1&#39;</span><span class="p">)</span> <span class="c1"># doctest: +ELLIPSIS</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">KeyError</span>: <span class="n">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ucamstaffoncosts.salary.scales.SalaryScaleTable.starting_point_for_grade">
<code class="descname">starting_point_for_grade</code><span class="sig-paren">(</span><em>grade</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/salary/scales.html#SalaryScaleTable.starting_point_for_grade"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.scales.SalaryScaleTable.starting_point_for_grade" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience wrapper around <a class="reference internal" href="#ucamstaffoncosts.salary.scales.SalaryScaleTable.scale_for_grade" title="ucamstaffoncosts.salary.scales.SalaryScaleTable.scale_for_grade"><code class="xref py py-meth docutils literal notranslate"><span class="pre">scale_for_grade()</span></code></a> which returns the name of the
first point on the scale for a given grade.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">starting_point_for_grade</span><span class="p">(</span><span class="n">Grade</span><span class="o">.</span><span class="n">GRADE_2</span><span class="p">)</span>
<span class="go">&#39;P3&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ucamstaffoncosts.salary.scales.SalaryScaleTable.point_to_salary_map_effective_dates">
<code class="descname">point_to_salary_map_effective_dates</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/salary/scales.html#SalaryScaleTable.point_to_salary_map_effective_dates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.scales.SalaryScaleTable.point_to_salary_map_effective_dates" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of effective-from dates for each point to salary mapping we know about. These
are ordered in <em>descending</em> order of dates.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">point_to_salary_map_effective_dates</span><span class="p">()</span>
<span class="go">[datetime.date(2017, 8, 1), datetime.date(2016, 8, 1)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ucamstaffoncosts.salary.scales.SalaryScaleTable.point_to_salary_map_for_date">
<code class="descname">point_to_salary_map_for_date</code><span class="sig-paren">(</span><em>date=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ucamstaffoncosts/salary/scales.html#SalaryScaleTable.point_to_salary_map_for_date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ucamstaffoncosts.salary.scales.SalaryScaleTable.point_to_salary_map_for_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a salary table mapping for a given date. The mapping table is a dictionary which
maps point names to full-time equivalent salaries. The return value is an (effective date,
table) pair giving the table and the date from which it became effective.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>date</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code>) – date for which mapping is required. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, use today’s date</td>
</tr>
</tbody>
</table>
<p>The exact mapping is selected based upon the date:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">date</span><span class="p">,</span> <span class="n">mapping</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">point_to_salary_map_for_date</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span> <span class="o">==</span> <span class="p">{</span>
<span class="gp">... </span><span class="s1">&#39;P1&#39;</span><span class="p">:</span> <span class="mi">13965</span><span class="p">,</span> <span class="s1">&#39;P2&#39;</span><span class="p">:</span> <span class="mi">14327</span><span class="p">,</span> <span class="s1">&#39;P3&#39;</span><span class="p">:</span> <span class="mi">14767</span><span class="p">,</span> <span class="s1">&#39;P4&#39;</span><span class="p">:</span> <span class="mi">15052</span><span class="p">,</span> <span class="s1">&#39;P5&#39;</span><span class="p">:</span> <span class="mi">15356</span><span class="p">,</span> <span class="s1">&#39;P6&#39;</span><span class="p">:</span> <span class="mi">15670</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;P7&#39;</span><span class="p">:</span> <span class="mi">15976</span><span class="p">,</span> <span class="s1">&#39;P8&#39;</span><span class="p">:</span> <span class="mi">16289</span><span class="p">}</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date</span><span class="p">,</span> <span class="n">mapping</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">point_to_salary_map_for_date</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span> <span class="o">==</span> <span class="p">{</span>
<span class="gp">... </span><span class="s1">&#39;P1&#39;</span><span class="p">:</span> <span class="mi">14304</span><span class="p">,</span> <span class="s1">&#39;P2&#39;</span><span class="p">:</span> <span class="mi">14675</span><span class="p">,</span> <span class="s1">&#39;P3&#39;</span><span class="p">:</span> <span class="mi">15126</span><span class="p">,</span> <span class="s1">&#39;P4&#39;</span><span class="p">:</span> <span class="mi">15417</span><span class="p">,</span> <span class="s1">&#39;P5&#39;</span><span class="p">:</span> <span class="mi">15721</span><span class="p">,</span> <span class="s1">&#39;P6&#39;</span><span class="p">:</span> <span class="mi">16035</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;P7&#39;</span><span class="p">:</span> <span class="mi">16341</span><span class="p">,</span> <span class="s1">&#39;P8&#39;</span><span class="p">:</span> <span class="mi">16654</span><span class="p">}</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>If no date is specified, today’s date is used as a default:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d1</span><span class="p">,</span> <span class="n">m1</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">point_to_salary_map_for_date</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d2</span><span class="p">,</span> <span class="n">m2</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">point_to_salary_map_for_date</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">date</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d1</span> <span class="o">==</span> <span class="n">d2</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m1</span> <span class="o">==</span> <span class="n">m2</span>
<span class="go">True</span>
</pre></div>
</div>
<p>If a date matches the effective from date, it returns the corresponding mapping:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">date</span><span class="p">,</span> <span class="n">mapping</span> <span class="o">=</span> <span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">point_to_salary_map_for_date</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span> <span class="o">==</span> <span class="p">{</span>
<span class="gp">... </span><span class="s1">&#39;P1&#39;</span><span class="p">:</span> <span class="mi">13965</span><span class="p">,</span> <span class="s1">&#39;P2&#39;</span><span class="p">:</span> <span class="mi">14327</span><span class="p">,</span> <span class="s1">&#39;P3&#39;</span><span class="p">:</span> <span class="mi">14767</span><span class="p">,</span> <span class="s1">&#39;P4&#39;</span><span class="p">:</span> <span class="mi">15052</span><span class="p">,</span> <span class="s1">&#39;P5&#39;</span><span class="p">:</span> <span class="mi">15356</span><span class="p">,</span> <span class="s1">&#39;P6&#39;</span><span class="p">:</span> <span class="mi">15670</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;P7&#39;</span><span class="p">:</span> <span class="mi">15976</span><span class="p">,</span> <span class="s1">&#39;P8&#39;</span><span class="p">:</span> <span class="mi">16289</span><span class="p">}</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>If a date is specified which is too far in the future, a <code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code> is raised:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">EXAMPLE_SALARY_SCALES</span><span class="o">.</span><span class="n">point_to_salary_map_for_date</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">31</span><span class="p">))</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ValueError</span>: <span class="n">date is too far in the past</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, UIS Automation Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>